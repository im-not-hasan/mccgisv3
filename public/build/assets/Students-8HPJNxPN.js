import{r as l,c as b,o as L,J as k,b as f,d as u,w as z,e as t,l as d,g as F,F as W,h as $,u as A,W as g,t as m,a as h}from"./app-BgyXi-Fv.js";import{_ as D}from"./DashboardLayout-Cc1Y4xz-.js";import{_ as x}from"./CardSpotlight.vue_vue_type_script_setup_true_lang-1WxLn8lC.js";import"./index-C5IwbFMY.js";import"./sweetalert2.esm.all-BQIkj5Wb.js";const M={class:"flex flex-col md:flex-row gap-6 p-1"},N={class:"flex-1 bg-white rounded-lg shadow p-4"},O={class:"grid grid-cols-1 md:grid-cols-2"},T={class:"flex flex-col justify-between space-y-2"},V={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 px-4"},E={class:"bg-white shadow p-4 rounded-lg text-center"},I={class:"text-3xl font-bold text-mcclightblue"},j={class:"bg-white shadow p-4 rounded-lg text-center"},G={class:"text-2xl font-bold text-gray-700"},Q={__name:"Students",setup(H){const _=e=>{g.visit(`/students/${e}`)},r=l(""),i=l(""),y=l(""),p=l({}),c=l({}),n=l({total:0,male:0,female:0}),o=l([{label:"BSIT",count:0,color:"#dc2626"},{label:"BSBA",count:0,color:"#16a34a"},{label:"BSHM",count:0,color:"#ea580c"},{label:"EDUC",count:0,color:"#1e3a8a"}]),w=async()=>{try{const e=await h.get("/session");r.value=e.data.fullname,i.value=e.data.level,y.value=e.data.username,(!r.value||!i.value)&&(window.location.href="/")}catch{window.location.href="/"}},S=async()=>{try{const e=await h.get("/student-stats");p.value=e.data.byCourse,c.value=e.data.byGender,n.value=e.data.totals,o.value=o.value.map(a=>({...a,count:p.value[a.label]||0}))}catch(e){console.error("Failed to fetch student stats:",e)}},C=b(()=>({tooltip:{trigger:"axis"},xAxis:{type:"category",data:o.value.map(e=>e.label),axisLabel:{fontWeight:"bold",color:"#374151"}},yAxis:{type:"value",axisLabel:{color:"#6B7280"}},series:[{data:o.value.map(e=>e.count),type:"bar",barWidth:"50%",itemStyle:{borderRadius:6,color:e=>o.value[e.dataIndex].color}}],grid:{left:"5%",right:"5%",bottom:"10%",top:"10%",containLabel:!0}})),B=b(()=>({tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:c.value.male||0,name:"Male",itemStyle:{color:"#3b82f6"}},{value:c.value.female||0,name:"Female",itemStyle:{color:"#f472b6"}}]}]}));return L(()=>{w(),S()}),(e,a)=>{const v=k("v-chart");return u(),f(D,{fullname:r.value,userLevel:i.value,title:"Students",class:"animate-slide-in-top"},{default:z(()=>[t("div",M,[t("div",N,[a[1]||(a[1]=t("h2",{class:"text-sm md:text-lg font-semibold text-gray-700 mb-2"},"Student Statistics",-1)),t("div",O,[d(v,{option:C.value,autoresize:"",class:"h-[300px]"},null,8,["option"]),d(v,{option:B.value,autoresize:"",class:"h-[300px]"},null,8,["option"])])]),t("div",T,[(u(!0),F(W,null,$(o.value,s=>(u(),f(x,{key:s.label,label:s.label,count:s.count,iconName:"students",useSvg:!0,bgColor:s.color,gradientSize:0,class:"cursor-pointer md:w-[300px] h-[90px]",onClick:J=>_(s.label)},null,8,["label","count","bgColor","onClick"]))),128)),d(x,{label:"View All Students",count:e.totalClasses,iconName:"students",useSvg:!0,bgColor:"#3b82f6",gradientSize:0,class:"cursor-pointer h-[90px]",onClick:a[0]||(a[0]=s=>A(g).visit("/students/all"))},null,8,["count"])])]),t("div",V,[t("div",E,[a[2]||(a[2]=t("h3",{class:"text-gray-700 font-semibold text-lg"},"Total Students",-1)),t("p",I,m(n.value.total),1)]),t("div",j,[a[3]||(a[3]=t("h3",{class:"text-gray-700 font-semibold text-lg"},"Male / Female",-1)),t("p",G," ðŸ‘¨ "+m(n.value.male)+" Â Â  ðŸ‘© "+m(n.value.female),1)])])]),_:1},8,["fullname","userLevel"])}}};export{Q as default};
