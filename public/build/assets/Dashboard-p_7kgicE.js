import{N as $,O as R,P as A,Q as B,R as G,U as D,V as M,X as L,g as u,d as a,k as _,e,j as S,t as l,l as g,W as v,u as O,G as F,r as d,o as j,a as k,c as T,b as w,w as I}from"./app-h29nfEoJ.js";import{_ as V}from"./DashboardLayout-B0p0wxmb.js";import{i as W,_ as x}from"./CardSpotlight.vue_vue_type_script_setup_true_lang-BJxbGCE5.js";import"./sweetalert2.esm.all-BQIkj5Wb.js";const z={key:0,class:"bg-mccblue text-white px-4 py-2 rounded mb-4 shadow"},P={class:"font-bold"},E={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6 mb-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},q={class:"bg-white rounded shadow p-6 mb-6 md:mb-0"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 items-center"},Q={class:"flex flex-col justify-center order-1 md:order-none md:mt-[-20px]"},X={class:"text-xl font-bold"},J={class:"text-xl font-bold"},K={class:"flex flex-col items-center order-2 md:order-none"},Y={class:"bg-white rounded shadow p-6"},Z={components:{"v-chart":$}},ee=Object.assign(Z,{__name:"AdminDashboard",props:{counts:Object,grading:Object,activeSemesters:Array,complianceRate:Number,studentsChartOptions:Object},setup(o){R([W,A,B,G,D,M,L]);const i={series:[{type:"gauge",startAngle:90,endAngle:-270,radius:"100%",progress:{show:!0,overlap:!1,roundCap:!0,clip:!1,itemStyle:{color:"#22c55e"}},axisLine:{lineStyle:{width:18,color:[[1,"#e5e7eb"]]}},pointer:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},data:[{value:100}],detail:{valueAnimation:!0,formatter:"{value}%",fontSize:24,fontWeight:"bold",color:"#0f172a",offsetCenter:[0,0]}}]},h=()=>v.visit("/subjects"),r=()=>v.visit("/classes"),b=()=>v.visit("/instructors"),m=()=>v.visit("/students"),p=()=>v.visit("/grades/incomplete");return(t,s)=>(a(),u("div",null,[o.activeSemesters.length?(a(),u("div",z,[s[0]||(s[0]=S(" Active Semesters: ")),e("span",P,l(o.activeSemesters.map(y=>y==="1"?"First Semester":y==="2"?"Second Semester":"Summer").join(", ")),1)])):_("",!0),e("div",E,[g(x,{label:"Students",count:o.counts.students||0,iconName:"students",useSvg:!0,onClick:m,class:"cursor-pointer"},null,8,["count"]),g(x,{label:"Teachers",count:o.counts.teachers||0,iconName:"teachers",useSvg:!0,onClick:b,class:"cursor-pointer"},null,8,["count"]),g(x,{label:"Classes",count:o.counts.class||0,iconName:"grades",useSvg:!0,onClick:r,class:"cursor-pointer"},null,8,["count"]),g(x,{label:"Subjects",count:o.counts.subjects||0,iconName:"subjects",useSvg:!0,onClick:h,class:"cursor-pointer"},null,8,["count"])]),e("div",H,[e("div",q,[s[3]||(s[3]=e("h2",{class:"text-lg font-semibold mb-4"},"Grading Compliance",-1)),e("div",U,[e("div",Q,[s[1]||(s[1]=e("p",{class:"text-gray-500"},"Classes with Complete Grades:",-1)),e("p",X,l(o.grading.complete||0),1),s[2]||(s[2]=e("p",{class:"text-gray-500 mt-4"},"Classes Missing Grades:",-1)),e("p",J,l(o.grading.incomplete||0),1)]),e("div",K,[g(O($),{option:i,class:"mx-auto h-48 md:w-48"}),e("button",{onClick:p,class:"mt-4 bg-mccblue text-white px-4 py-2 rounded hover:bg-mccdarkblue transition w-full"}," View Incomplete Grades ")])])]),e("div",Y,[s[4]||(s[4]=e("h2",{class:"text-lg font-semibold mb-4"},"Students per Course",-1)),g(O($),{option:o.studentsChartOptions,class:"h-64"},null,8,["option"])])])]))}}),te={key:0,class:"bg-mccblue text-white px-4 py-2 rounded mb-4 shadow"},se={class:"font-bold"},oe={key:1,class:"flex justify-center py-10"},ae={key:2},ne={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6 mb-6"},le={class:"bg-white rounded shadow p-6 mb-6"},ce={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},ie={class:"text-xl font-bold"},re={class:"text-xl font-bold"},de={class:"text-xl font-bold"},ue={class:"w-full bg-gray-300 rounded-full h-3 overflow-hidden"},me={__name:"TeacherDashboard",props:{counts:Object,grading:Object,activeSemesters:Array,complianceRate:[String,Number],loading:{type:Boolean,default:!1}},setup(o){const i=()=>v.visit("/classes"),h=()=>v.visit("/subjects"),r=()=>v.visit("/consultation"),b=()=>v.visit("/settings"),m=()=>v.visit("/subjects");return(p,t)=>(a(),u("div",null,[o.activeSemesters.length?(a(),u("div",te,[t[0]||(t[0]=S(" Active Semesters: ")),e("span",se,l(o.activeSemesters.map(s=>s==="1"?"First Semester":s==="2"?"Second Semester":"Summer").join(", ")),1)])):_("",!0),o.loading?(a(),u("div",oe,t[1]||(t[1]=[e("svg",{class:"animate-spin h-8 w-8 text-mccblue",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1)]))):(a(),u("div",ae,[e("div",ne,[g(x,{label:"My Subjects",count:o.counts.class||0,iconName:"subjects",useSvg:!0,onClick:h,class:"cursor-pointer"},null,8,["count"]),g(x,{label:"My Classes",count:o.counts.subjects||0,iconName:"grades",useSvg:!0,onClick:i,class:"cursor-pointer"},null,8,["count"]),g(x,{label:"Consultations",count:"-",iconName:"grades",useSvg:!0,onClick:r,class:"cursor-pointer"}),g(x,{label:"My Performance",count:"-",iconName:"grades",useSvg:!0,onClick:b,class:"cursor-pointer"})]),e("div",le,[t[5]||(t[5]=e("h2",{class:"text-lg font-semibold mb-4"},"Grading Compliance",-1)),e("div",ce,[e("div",null,[t[2]||(t[2]=e("p",{class:"text-gray-500"},"Classes with Complete Grades",-1)),e("p",ie,l(o.grading.complete||0),1)]),e("div",null,[t[3]||(t[3]=e("p",{class:"text-gray-500"},"Classes Missing Grades",-1)),e("p",re,l(o.grading.incomplete||0),1)]),e("div",null,[t[4]||(t[4]=e("p",{class:"text-gray-500"},"% Fully Graded",-1)),e("p",de,l(o.complianceRate)+"%",1)])]),e("div",ue,[e("div",{class:"bg-mccblue h-3",style:F({width:o.complianceRate+"%"})},null,4)]),e("button",{onClick:m,class:"mt-4 bg-mccblue text-white px-4 py-2 rounded hover:bg-mccdarkblue transition"}," View Incomplete Grades ")])]))]))}},ge={key:0,class:"text-center py-10"},ve={key:1},be={key:0,class:"bg-white rounded shadow p-4 mb-4"},pe={class:"text-2xl font-bold text-mccblue"},he={class:"text-gray-700"},xe={class:"font-medium"},fe={key:1,class:"bg-mccblue text-white px-4 py-2 rounded mb-4 shadow"},ye={class:"font-bold"},Se={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6"},we={__name:"StudentDashboard",setup(o){const i=d(null),h=d([]),r=d(!0),b=async()=>{try{const t=await k.get("/student/dashboard");console.log("Student dashboard response:",t),t.data.student||console.error("No student data received:",t.data),i.value=t.data.student,h.value=t.data.activeSemesters}catch(t){console.error("Failed to load student dashboard data:",t)}finally{r.value=!1}};j(()=>{b()});const m=()=>v.visit("/grades"),p=()=>v.visit("/subjects");return(t,s)=>(a(),u("div",null,[r.value?(a(),u("div",ge,s[0]||(s[0]=[e("svg",{class:"animate-spin h-8 w-8 text-mccblue mx-auto",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1)]))):(a(),u("div",ve,[i.value?(a(),u("div",be,[e("h1",pe,"Welcome, "+l(i.value.fullname),1),e("p",he,[s[1]||(s[1]=S(" ID: ")),e("span",xe,l(i.value.id),1),S(" | "+l(i.value.course)+" "+l(i.value.year)+"-"+l(i.value.section),1)])])):_("",!0),h.value.length?(a(),u("div",fe,[s[2]||(s[2]=S(" Active Semesters: ")),e("span",ye,l(h.value.map(y=>y==="1"?"First Semester":y==="2"?"Second Semester":"Summer").join(", ")),1)])):_("",!0),e("div",Se,[g(x,{label:"My Grades",iconName:"grades",useSvg:!0,onClick:m,class:"cursor-pointer"}),g(x,{label:"My Subjects",iconName:"subjects",useSvg:!0,onClick:p,class:"cursor-pointer"})]),s[3]||(s[3]=e("div",{class:"bg-white rounded shadow p-6"},[e("h2",{class:"text-lg font-semibold mb-4"},"Announcements"),e("p",{class:"text-gray-600"},"No announcements at the moment.")],-1))]))]))}},_e={key:0,class:"text-center py-10"},Ce={key:1},ke={class:"bg-white rounded shadow p-4 mb-4"},$e={class:"text-2xl font-bold text-mccblue"},je={class:"text-gray-700"},Ne={class:"font-medium"},Oe={key:0,class:"bg-mccblue text-white px-4 py-2 rounded mb-4 shadow"},Te={class:"font-bold"},Re={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6"},Ae={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},Be={class:"bg-white rounded shadow p-4 text-center"},Ge={class:"text-2xl font-bold text-mccblue"},De={class:"bg-white rounded shadow p-4 text-center"},Me={class:"text-2xl font-bold text-orange-500"},Le={class:"bg-white rounded shadow p-4 text-center"},Fe={class:"text-2xl font-bold text-green-500"},Ie={class:"bg-white rounded shadow p-4 text-center"},Ve={class:"text-2xl font-bold text-mccblue"},We={__name:"RegistrarDashboard",props:{counts:Object,grading:Object,activeSemesters:Array,complianceRate:Number,studentsChartOptions:Object,fullname:Object,username:Object},setup(o){const i=d(""),h=d(""),r=d({total:0}),b=d([]),m=d([]),p=d(0),t=d(!0),s=async()=>{try{const f=await k.get("/registrar/dashboard");i.value=f.data.registrar.name,h.value=f.data.registrar.id,r.value=f.data.studentCounts,b.value=f.data.activeSemesters,m.value=f.data.pendingRequests,p.value=f.data.complianceRate}catch(f){console.error("Failed to load registrar dashboard:",f)}finally{t.value=!1}};j(()=>{s()});const y=()=>v.visit("/classes"),C=()=>v.visit("/students");return(f,c)=>(a(),u("div",null,[t.value?(a(),u("div",_e,c[0]||(c[0]=[e("svg",{class:"animate-spin h-8 w-8 text-mccblue mx-auto",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1)]))):(a(),u("div",Ce,[e("div",ke,[e("h1",$e,"Welcome, "+l(o.fullname),1),e("p",je,[c[1]||(c[1]=S(" ID: ")),e("span",Ne,l(o.username),1),c[2]||(c[2]=S(" | Registrar Portal "))])]),b.value.length?(a(),u("div",Oe,[c[3]||(c[3]=S(" Active Semesters: ")),e("span",Te,l(b.value.map(n=>n==="1"?"First Semester":n==="2"?"Second Semester":"Summer").join(", ")),1)])):_("",!0),e("div",Re,[g(x,{label:"Classes",count:o.counts.class||0,iconName:"grades",useSvg:!0,onClick:y,class:"cursor-pointer"},null,8,["count"]),g(x,{label:"Students",count:o.counts.students||0,iconName:"students",useSvg:!0,onClick:C,class:"cursor-pointer"},null,8,["count"])]),c[8]||(c[8]=e("div",{class:"bg-white rounded shadow p-6 mb-6"},[e("h2",{class:"text-lg font-semibold mb-4"},"Announcements"),e("p",{class:"text-gray-600"},"No announcements at the moment.")],-1)),e("div",Ae,[e("div",Be,[c[4]||(c[4]=e("p",{class:"text-gray-500"},"Total Students",-1)),e("p",Ge,l(r.value.total),1)]),e("div",De,[c[5]||(c[5]=e("p",{class:"text-gray-500"},"Pending Requests",-1)),e("p",Me,l(m.value.length),1)]),e("div",Le,[c[6]||(c[6]=e("p",{class:"text-gray-500"},"Compliance Rate",-1)),e("p",Fe,l(p.value)+"%",1)]),e("div",Ie,[c[7]||(c[7]=e("p",{class:"text-gray-500"},"Active Semesters",-1)),e("p",Ve,l(b.value.length),1)])])]))]))}},ze={key:0,class:"flex justify-center py-10"},Pe={key:1},Ee={key:4,class:"text-center text-red-500"},Xe={__name:"Dashboard",setup(o){const i=d(""),h=d(""),r=d(""),b=d(!0),m=d({students:0,teachers:0,class:0,subjects:0}),p=d([]),t=d({complete:0,incomplete:0}),s=d([{course:"BSIT",students:0},{course:"BSBA",students:0},{course:"BSED",students:0}]),y=T(()=>{const n=(t.value.complete||0)+(t.value.incomplete||0);return n===0?0:(t.value.complete/n*100).toFixed(1)}),C=T(()=>({tooltip:{trigger:"axis"},xAxis:{type:"category",data:s.value.map(n=>n.course),axisLabel:{fontWeight:"bold",color:"#374151"}},yAxis:{type:"value",axisLabel:{color:"#6B7280"}},series:[{type:"bar",barWidth:"50%",data:s.value.map(n=>n.students||0),itemStyle:{color:"#0ea5e9"}}],grid:{left:"5%",right:"5%",bottom:"10%",top:"10%",containLabel:!0}})),f=async()=>{try{const n=await k.get("/session");i.value=n.data.fullname,r.value=n.data.level,h.value=n.data.username,(!i.value||!r.value)&&(window.location.href="/")}catch{window.location.href="/"}},c=async()=>{try{const n=await k.get("/dashboard-counts");m.value=n.data.counts||{},p.value=n.data.activeSemesters||[],t.value=n.data.grading||{complete:0,incomplete:0},s.value=n.data.studentsPerCourse||[]}catch(n){console.error("Error:",n)}finally{b.value=!1}};return j(()=>{f(),c()}),(n,N)=>(a(),w(V,{fullname:i.value,userLevel:r.value,title:"Dashboard",class:"animate-slide-in-top"},{default:I(()=>[b.value?(a(),u("div",ze,N[0]||(N[0]=[e("svg",{class:"animate-spin h-8 w-8 text-mccblue",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1)]))):(a(),u("div",Pe,[r.value==="admin"?(a(),w(ee,{key:0,counts:m.value,grading:t.value,activeSemesters:p.value,complianceRate:y.value,studentsChartOptions:C.value},null,8,["counts","grading","activeSemesters","complianceRate","studentsChartOptions"])):r.value==="teacher"?(a(),w(me,{key:1,counts:m.value,grading:t.value,activeSemesters:p.value},null,8,["counts","grading","activeSemesters"])):r.value==="student"?(a(),w(we,{key:2,counts:m.value,activeSemesters:p.value},null,8,["counts","activeSemesters"])):r.value==="registrar"?(a(),w(We,{key:3,counts:m.value,grading:t.value,activeSemesters:p.value,complianceRate:y.value,studentsChartOptions:C.value,username:h.value,fullname:i.value},null,8,["counts","grading","activeSemesters","complianceRate","studentsChartOptions","username","fullname"])):(a(),u("div",Ee," Unknown user level: "+l(r.value),1))]))]),_:1},8,["fullname","userLevel"]))}};export{Xe as default};
