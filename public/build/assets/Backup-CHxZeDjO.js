import{_ as u}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as o,d as i,e as n,i as r,t as m}from"./app-_kH1cCAw.js";const p={data(){return{loading:!0,isAdmin:!1,error:null}},created(){this.checkSession()},methods:{async checkSession(){var a;try{const e=await fetch("/session",{headers:{Accept:"application/json"}});if(!e.ok){this.loading=!1,this.isAdmin=!1,setTimeout(()=>{window.location="/"},1200);return}const t=await e.json();(((a=t.user)==null?void 0:a.role)||t.user_level||t.level||null)==="admin"||t.is_admin===!0?this.isAdmin=!0:(this.isAdmin=!1,setTimeout(()=>{window.location="/"},1200))}catch(e){this.error="Failed to check session",console.error(e),setTimeout(()=>{window.location="/"},1200)}finally{this.loading=!1}},startDownload(){window.location="/ldpukcabbd"}}},h={class:"min-h-screen flex items-center justify-center p-6"},f={class:"w-full max-w-lg text-center"},w={key:0},_={key:1,class:"text-red-600"},k={key:2,class:"mt-4"},g={key:3,class:"mt-4 text-red-500"};function b(a,e,t,c,s,l){return i(),o("div",h,[n("div",f,[e[2]||(e[2]=n("h1",{class:"text-2xl font-bold mb-4"},"Database Backup",-1)),s.loading?(i(),o("p",w,"Checking session…")):r("",!0),!s.loading&&!s.isAdmin?(i(),o("p",_," You are not authorized to access this page. Redirecting… ")):r("",!0),s.isAdmin&&!s.loading?(i(),o("div",k,[e[1]||(e[1]=n("p",{class:"mb-2"},"You are an admin. Click below to download the database backup.",-1)),n("button",{onClick:e[0]||(e[0]=(...d)=>l.startDownload&&l.startDownload(...d)),class:"px-4 py-2 rounded bg-blue-600 text-white"}," Download Backup Now ")])):r("",!0),s.error?(i(),o("div",g,m(s.error),1)):r("",!0)])])}const v=u(p,[["render",b],["__scopeId","data-v-1ac4181a"]]);export{v as default};
