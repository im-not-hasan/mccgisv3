import{r as f,g as c,d as n,e,b as g,l as _,w as C,k as w,p as A,f as v,i as M,a2 as P,T as j,M as B,a as y,o as $,F as L,h as D,t as b,c as F,y as S,n as Y}from"./app-BvAkt5Y3.js";import{_ as U}from"./DashboardLayout-C2guQ68G.js";import{S as p}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},I={class:"bg-white w-full max-w-md p-6 rounded-xl shadow-lg relative animate-fade-in-up"},N={class:"flex flex-col gap-2"},z={class:"inline-flex items-center gap-2"},V={class:"inline-flex items-center gap-2"},T={class:"inline-flex items-center gap-2"},q={__name:"AcademicYearForm",emits:["submitted"],setup(h,{emit:u}){const l=u,d=f(!1),i=f({academic_year:"",semester:""}),m=()=>{d.value=!1,i.value={academic_year:"",semester:""}},s=async()=>{if(!/^\d{4}-\d{4}$/.test(i.value.academic_year))return p.fire({icon:"error",title:"Invalid Format",text:"Academic Year must be in the format xxxx-xxxx (e.g. 2025-2026)."});try{const{data:t}=await y.get("/ay");if(t.length>=4)return p.fire({icon:"error",title:"Limit Reached",text:"You can only have up to 4 academic year entries."});const r=parseInt(i.value.semester);if(t.find(x=>x.academicyear===i.value.academic_year&&parseInt(x.semester)===r))return p.fire({icon:"error",title:"Duplicate Entry",text:"This academic year and semester already exists."});await y.post("/settings/academic-year",{academicyear:i.value.academic_year,semester:r,display:0}),m(),p.fire({icon:"success",title:"Academic Year Added",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1}),l("submitted")}catch(t){console.error("Error saving academic year:",t),p.fire("Error","Could not save academic year","error")}};return(a,t)=>(n(),c("div",null,[e("button",{onClick:t[0]||(t[0]=r=>d.value=!0),class:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md transition"},t[5]||(t[5]=[e("p",{class:"text-xs md:text-base"}," + New Academic Year ",-1)])),(n(),g(B,{to:"body"},[_(j,{name:"fade"},{default:C(()=>[d.value?(n(),c("div",E,[e("div",I,[t[12]||(t[12]=e("h2",{class:"text-xl font-bold mb-4 text-mccblue"},"Create Academic Year",-1)),e("form",{onSubmit:A(s,["prevent"]),class:"space-y-4"},[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Academic Year",-1)),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>i.value.academic_year=r),type:"text",placeholder:"e.g. 2025-2026",class:"w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",required:""},null,512),[[M,i.value.academic_year]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Semester",-1)),e("div",N,[e("label",z,[v(e("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=r=>i.value.semester=r),value:"1",class:"focus:ring-0 cursor-pointer",required:""},null,512),[[P,i.value.semester]]),t[7]||(t[7]=e("span",null,"First Semester",-1))]),e("label",V,[v(e("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=r=>i.value.semester=r),value:"2",class:"focus:ring-0 cursor-pointer"},null,512),[[P,i.value.semester]]),t[8]||(t[8]=e("span",null,"Second Semester",-1))]),e("label",T,[v(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=r=>i.value.semester=r),value:"3",class:"focus:ring-0 cursor-pointer"},null,512),[[P,i.value.semester]]),t[9]||(t[9]=e("span",null,"Summer",-1))])])]),e("div",{class:"flex justify-end gap-4 pt-2"},[e("button",{type:"button",onClick:m,class:"text-gray-500 hover:text-red-500 transition"},"Cancel"),t[11]||(t[11]=e("button",{type:"submit",class:"bg-mccblue hover:bg-mccdarkblue text-white px-4 py-2 rounded-md transition"},"Save",-1))])],32),e("button",{onClick:m,class:"absolute top-4 right-4 text-gray-500 text-2xl hover:text-red-500 transition"}," Ã— ")])])):w("",!0)]),_:1})]))]))}},O=k(q,[["__scopeId","data-v-5ebe8fca"]]),R={class:"p-6 rounded-xl shadow-xl bg-white text-gray-800"},G={class:"md:flex md:justify-between items-center"},H={class:"w-full border-separate border-spacing-y-2 table-fixed"},J={class:"px-4 py-2"},K={class:"px-4 py-2 text-center"},Q={class:"px-4 py-2 text-right"},W={class:"flex justify-end items-center gap-4"},X={class:"inline-flex items-center cursor-pointer"},Z=["checked","onChange"],ee=["onClick"],te={key:0},se={__name:"AcademicYearList",setup(h){const u=f(""),l=f(""),d=f([]),i=async()=>{const{data:t}=await y.get("/session");u.value=t.fullname,l.value=t.level,(!u.value||!l.value)&&(window.location.href="/")},m=async()=>{const{data:t}=await y.get("/ay");d.value=t},s=async t=>{try{const r=t.display?0:1;await y.post("/ay/toggle-display",{id:t.id,display:r}),t.display=r,p.fire({icon:"success",title:"Academic Year Display Updated",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1})}catch{p.fire("Error","Could not update academic year","error")}},a=async t=>{if((await p.fire({title:"Are you sure?",text:`Delete Academic Year ${t.academicyear} - ${t.semester==="1"?"First Semester":t.semester==="2"?"Second Semester":"Summer"}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#e3342f",cancelButtonColor:"#6c757d",confirmButtonText:"Yes"})).isConfirmed)try{await y.delete(`/ay/${t.id}`),d.value=d.value.filter(o=>o.id!==t.id),p.fire({icon:"success",title:"Academic Year Deleted",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1})}catch{p.fire("Error","Could not delete academic year","error")}};return $(()=>{i(),m()}),(t,r)=>(n(),c("div",R,[e("div",G,[r[0]||(r[0]=e("h2",{class:"text-2xl font-semibold mb-2 md:mb-4 ml-2 text-mccblue"},"Academic Year List",-1)),_(O,{onSubmitted:m,class:"md:mt-[-17px] mb-2 md:mb-0"})]),r[4]||(r[4]=e("hr",{class:"border-t border-gray-300 mb-4"},null,-1)),e("table",H,[r[3]||(r[3]=e("thead",{class:"bg-mccblue text-white"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left w-1/3"},"Academic Year"),e("th",{class:"px-4 py-2 text-center w-1/3"},"Semester"),e("th",{class:"px-4 py-2 text-right w-1/3"},"Display")])],-1)),e("tbody",null,[(n(!0),c(L,null,D(d.value,o=>(n(),c("tr",{key:o.id,class:"bg-white text-gray-800 border hover:bg-gray-100 transition"},[e("td",J,b(o.academicyear),1),e("td",K,b(o.semester==="1"?"First Semester":o.semester==="2"?"Second Semester":"Summer"),1),e("td",Q,[e("div",W,[e("label",X,[e("input",{type:"checkbox",class:"sr-only",checked:o.display,onChange:x=>s(o)},null,40,Z),r[1]||(r[1]=e("span",{class:"relative w-10 h-6 bg-gray-300 rounded-full transition-colors duration-300 block"},[e("span",{class:"absolute top-[2px] left-[2px] w-5 h-5 bg-white rounded-full transition-transform duration-300 ball"})],-1))]),e("button",{onClick:x=>a(o),class:"text-red-500 hover:text-red-700",title:"Delete"}," ðŸ—‘ï¸ ",8,ee)])])]))),128)),d.value.length===0?(n(),c("tr",te,r[2]||(r[2]=[e("td",{colspan:"3",class:"text-center py-4 text-gray-500"},"No academic years available.",-1)]))):w("",!0)])])]))}},oe=k(se,[["__scopeId","data-v-776eabcc"]]),re={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},le={class:"bg-white w-full max-w-md p-6 rounded-xl shadow-lg relative animate-fade-in-up"},ae={class:"relative"},ne=["type"],ie={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},de={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},ue={class:"relative"},ce=["type"],me={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},pe={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},xe={class:"relative"},fe=["type"],be={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},ye={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},we={class:"flex justify-end gap-4 pt-2"},ve=["disabled"],ge={__name:"ChangePasswordForm",setup(h){const u=f(!1),l=f({oldPassword:"",newPassword:"",confirmPassword:""}),d=f(!1),i=f(!1),m=f(!1),s=F(()=>l.value.newPassword&&l.value.newPassword===l.value.confirmPassword),a=async()=>{var r,o;if(!s.value){p.fire({icon:"warning",title:"Passwords do not match!"});return}try{const x=await y.post("/settings/update-password",{oldPassword:l.value.oldPassword,newPassword:l.value.newPassword});l.value.oldPassword="",l.value.newPassword="",l.value.confirmPassword="",p.fire({icon:"success",title:x.data.message||"Password Updated!"}),t()}catch(x){p.fire({icon:"error",title:((o=(r=x.response)==null?void 0:r.data)==null?void 0:o.message)||"Error updating password."}),console.error(x)}},t=()=>{u.value=!1,l.value={oldPassword:"",newPassword:"",confirmPassword:""}};return(r,o)=>(n(),c("div",null,[e("button",{onClick:o[0]||(o[0]=x=>u.value=!0),class:"bg-mccblue hover:bg-mccdarkblue text-white font-semibold py-2 px-4 rounded-md transition"}," Change Password "),(n(),g(B,{to:"body"},[_(j,{name:"fade"},{default:C(()=>[u.value?(n(),c("div",re,[e("div",le,[o[16]||(o[16]=e("h2",{class:"text-xl font-bold mb-4 text-mccblue select-none"},"Change Password",-1)),e("form",{onSubmit:A(a,["prevent"]),class:"space-y-5"},[e("div",ae,[o[9]||(o[9]=e("label",{for:"oldPassword",class:"block text-sm font-medium text-gray-700 mb-1"},"Old Password",-1)),v(e("input",{type:d.value?"text":"password",id:"oldPassword","onUpdate:modelValue":o[1]||(o[1]=x=>l.value.oldPassword=x),required:"",placeholder:"Enter old password",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition"},null,8,ne),[[S,l.value.oldPassword]]),e("button",{type:"button",tabindex:"-1",onClick:o[2]||(o[2]=x=>d.value=!d.value),class:"absolute right-3 top-9 text-gray-500 hover:text-mccblue transition"},[d.value?(n(),c("svg",de,o[8]||(o[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 1.274-4.057 5.064-7 9.542-7 1.011 0 1.988.149 2.91.425M15 12a3 3 0 01-6 0m-6.9-5.9l13.8 13.8"},null,-1)]))):(n(),c("svg",ie,o[7]||(o[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.478 0-8.268-2.943-9.542-7z"},null,-1)])))])]),e("div",ue,[o[12]||(o[12]=e("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700 mb-1"},"New Password",-1)),v(e("input",{type:i.value?"text":"password",id:"newPassword","onUpdate:modelValue":o[3]||(o[3]=x=>l.value.newPassword=x),required:"",placeholder:"Enter new password",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition"},null,8,ce),[[S,l.value.newPassword]]),e("button",{type:"button",tabindex:"-1",onClick:o[4]||(o[4]=x=>i.value=!i.value),class:"absolute right-3 top-9 text-gray-500 hover:text-mccblue transition"},[i.value?(n(),c("svg",pe,o[11]||(o[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 1.274-4.057 5.064-7 9.542-7 1.011 0 1.988.149 2.91.425M15 12a3 3 0 01-6 0m-6.9-5.9l13.8 13.8"},null,-1)]))):(n(),c("svg",me,o[10]||(o[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.478 0-8.268-2.943-9.542-7z"},null,-1)])))])]),e("div",xe,[o[15]||(o[15]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-1"},"Confirm New Password",-1)),v(e("input",{type:m.value?"text":"password",id:"confirmPassword","onUpdate:modelValue":o[5]||(o[5]=x=>l.value.confirmPassword=x),required:"",placeholder:"Confirm new password",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition"},null,8,fe),[[S,l.value.confirmPassword]]),e("button",{type:"button",tabindex:"-1",onClick:o[6]||(o[6]=x=>m.value=!m.value),class:"absolute right-3 top-9 text-gray-500 hover:text-mccblue transition"},[m.value?(n(),c("svg",ye,o[14]||(o[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 1.274-4.057 5.064-7 9.542-7 1.011 0 1.988.149 2.91.425M15 12a3 3 0 01-6 0m-6.9-5.9l13.8 13.8"},null,-1)]))):(n(),c("svg",be,o[13]||(o[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.478 0-8.268-2.943-9.542-7z"},null,-1)])))])]),l.value.confirmPassword?(n(),c("div",{key:0,class:Y(["text-sm font-medium",s.value?"text-green-600":"text-red-600"])},b(s.value?"Passwords match":"Passwords do not match"),3)):w("",!0),e("div",we,[e("button",{type:"button",onClick:t,class:"text-gray-500 hover:text-red-500 transition"},"Cancel"),e("button",{type:"submit",disabled:!s.value,class:"bg-mccblue hover:bg-mccdarkblue text-white px-4 py-2 rounded-md transition"},"Update",8,ve)])],32),e("button",{onClick:t,class:"absolute top-4 right-4 text-gray-500 text-2xl hover:text-red-500 transition"}," Ã— ")])])):w("",!0)]),_:1})]))]))}},he=k(ge,[["__scopeId","data-v-871821e4"]]),_e={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ke={class:"bg-white w-full max-w-md p-6 rounded-xl shadow-lg relative animate-fade-in-up"},Ce={__name:"CurriculumForm",emits:["submitted"],setup(h,{emit:u}){const l=u,d=f(!1),i=f({curriculum:""}),m=()=>{d.value=!1,i.value={curriculum:""}},s=async()=>{try{const{data:a}=await y.get("/curriculums");if(a.find(r=>parseInt(r.curriculum)===parseInt(i.value.curriculum)))return p.fire({icon:"error",title:"Duplicate Entry",text:"This curriculum already exists."});await y.post("/settings/curriculum",{curriculum:i.value.curriculum,display:0}),m(),p.fire({icon:"success",title:"Curriculum Added",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1}),l("submitted")}catch(a){console.error("Error saving curriculum:",a),p.fire("Error","Could not save curriculum","error")}};return(a,t)=>(n(),c("div",null,[e("button",{onClick:t[0]||(t[0]=r=>d.value=!0),class:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md transition"},t[2]||(t[2]=[e("p",{class:"text-xs md:text-base"}," + New Curriculum ",-1)])),(n(),g(B,{to:"body"},[_(j,{name:"fade"},{default:C(()=>[d.value?(n(),c("div",_e,[e("div",ke,[t[5]||(t[5]=e("h2",{class:"text-xl font-bold mb-4 text-mccblue"},"Create Curriculum",-1)),e("form",{onSubmit:A(s,["prevent"]),class:"space-y-4"},[e("div",null,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-gray-700"},"Curriculum",-1)),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>i.value.curriculum=r),type:"number",placeholder:"e.g. 1",class:"w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",required:""},null,512),[[M,i.value.curriculum]])]),e("div",{class:"flex justify-end gap-4 pt-2"},[e("button",{type:"button",onClick:m,class:"text-gray-500 hover:text-red-500 transition"},"Cancel"),t[4]||(t[4]=e("button",{type:"submit",class:"bg-mccblue hover:bg-mccdarkblue text-white px-4 py-2 rounded-md transition"},"Save",-1))])],32),e("button",{onClick:m,class:"absolute top-4 right-4 text-gray-500 text-2xl hover:text-red-500 transition"}," Ã— ")])])):w("",!0)]),_:1})]))]))}},$e=k(Ce,[["__scopeId","data-v-5f415851"]]),Pe={class:"p-6 rounded-xl shadow-xl bg-white text-gray-800"},Se={class:"md:flex md:justify-between items-center"},Ae={class:"w-full border-separate border-spacing-y-2 table-fixed"},je={class:"px-4 py-2"},Be={class:"px-4 py-2 text-right"},Le={class:"flex justify-end items-center gap-4"},De={class:"inline-flex items-center cursor-pointer"},Me=["checked","disabled","onChange"],Ye=["onClick"],Fe={key:0},Ue={__name:"CurriculumList",setup(h){const u=f([]),l=f(new Set),d=async()=>{const{data:s}=await y.get("/curriculums");u.value=Array.isArray(s)?s:[]},i=async s=>{var a;if(!(!s||typeof s.display>"u")&&!l.value.has(s.id)){l.value.add(s.id);try{const t=s.display?0:1,r=await y.post("/curriculums/toggle-display",{id:s.id,display:t});(a=r.data)!=null&&a.curriculums?u.value=r.data.curriculums:u.value=u.value.map(o=>o.id===s.id?{...o,display:t}:t?{...o,display:0}:o),p.fire({icon:"success",title:"Curriculum Display Updated",toast:!0,position:"top-end",timer:1600,showConfirmButton:!1})}catch{try{await d()}catch{}p.fire("Error","Could not update curriculum","error")}finally{l.value.delete(s.id)}}},m=async s=>{if((await p.fire({title:"Are you sure?",text:`Delete Curriculum ${s.curriculum}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#e3342f",cancelButtonColor:"#6c757d",confirmButtonText:"Yes"})).isConfirmed)try{await y.delete(`/curriculums/${s.id}`),u.value=u.value.filter(t=>t.id!==s.id),p.fire({icon:"success",title:"Curriculum Deleted",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1})}catch{p.fire("Error","Could not delete curriculum","error")}};return $(d),(s,a)=>(n(),c("div",Pe,[e("div",Se,[a[0]||(a[0]=e("h2",{class:"text-2xl font-semibold mb-2 md:mb-4 ml-2 text-mccblue"},"Curriculum List",-1)),_($e,{onSubmitted:d,class:"md:mt-[-17px] mb-2 md:mb-0"})]),a[4]||(a[4]=e("hr",{class:"border-t border-gray-300 mb-4"},null,-1)),e("table",Ae,[a[3]||(a[3]=e("thead",{class:"bg-mccblue text-white"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left w-2/3"},"Curriculum"),e("th",{class:"px-4 py-2 text-right w-1/3"},"Display")])],-1)),e("tbody",null,[(n(!0),c(L,null,D(u.value,t=>(n(),c("tr",{key:t.id,class:"bg-white text-gray-800 border hover:bg-gray-100 transition"},[e("td",je,"Curriculum "+b(t.curriculum),1),e("td",Be,[e("div",Le,[e("label",De,[e("input",{type:"checkbox",class:"sr-only",checked:!!(t!=null&&t.display),disabled:l.value.has(t.id),onChange:r=>i(t)},null,40,Me),a[1]||(a[1]=e("span",{class:"relative w-10 h-6 bg-gray-300 rounded-full transition-colors duration-300 block"},[e("span",{class:"absolute top-[2px] left-[2px] w-5 h-5 bg-white rounded-full transition-transform duration-300 ball"})],-1))]),e("button",{onClick:r=>m(t),class:"text-red-500 hover:text-red-700",title:"Delete"}," ðŸ—‘ï¸ ",8,Ye)])])]))),128)),u.value.length===0?(n(),c("tr",Fe,a[2]||(a[2]=[e("td",{colspan:"2",class:"text-center py-4 text-gray-500"},"No curriculums available.",-1)]))):w("",!0)])])]))}},Ee=k(Ue,[["__scopeId","data-v-36c169c2"]]),Ie={class:"p-6 rounded-xl shadow-xl bg-white text-gray-800"},Ne={key:0,class:"text-center text-gray-500 py-6"},ze={key:1,class:"overflow-x-auto"},Ve={class:"w-full border-separate border-spacing-y-2 table-fixed"},Te={class:"px-4 py-2"},qe={class:"font-semibold md:text-base text-xs"},Oe={class:"md:text-sm text-xs text-gray-500 md:ml-1"},Re={class:"px-4 py-2 capitalize md:text-base text-xs"},Ge={class:"px-4 py-2 md:text-base text-xs"},He={class:"px-4 py-2 md:text-base text-xs"},Je={class:"px-4 py-2 text-gray-600 md:text-base text-xs"},Ke={key:0},Qe={__name:"LoginLogs",setup(h){const u=f([]),l=f(!0),d=async()=>{l.value=!0;try{const s=await y.get("/admin/login-logs");u.value=Array.isArray(s.data)?s.data:[]}catch(s){console.error("Failed to fetch logs:",s)}finally{l.value=!1}};$(d);function i(s){return new Date(s).toLocaleString()}function m(s){return!s.country&&!s.region&&!s.city?"â€”":[s.city,s.region,s.country].filter(Boolean).join(", ")}return(s,a)=>(n(),c("div",Ie,[e("div",{class:"flex justify-between items-center"},[a[0]||(a[0]=e("h2",{class:"text-2xl font-semibold mb-2 md:mb-4 ml-2 text-mccblue"},"Activity Logs",-1)),e("button",{onClick:d,class:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md transition md:mt-[-17px] mb-2 md:mb-0 text-xs md:text-base"}," Refresh ")]),a[3]||(a[3]=e("hr",{class:"border-t border-gray-300 mb-4"},null,-1)),l.value?(n(),c("div",Ne," Loading logs... ")):(n(),c("div",ze,[e("table",Ve,[a[2]||(a[2]=e("thead",{class:"bg-mccblue text-white"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left md:w-[22%] w-[25%] md:text-base text-xs"},"User"),e("th",{class:"px-4 py-2 text-left md:w-[14%] w-[18%] md:text-base text-xs"},"Event"),e("th",{class:"px-4 py-2 text-left md:w-[18%] w-[21%] md:text-base text-xs"},"IP Address"),e("th",{class:"px-4 py-2 text-left md:w-[25%] w-[15%] md:text-base text-xs"},"Location"),e("th",{class:"px-4 py-2 text-left md:w-[21%] w-[21%] md:text-base text-xs"},"Date")])],-1)),e("tbody",null,[(n(!0),c(L,null,D(u.value,t=>(n(),c("tr",{key:t.id,class:"bg-white text-gray-800 border hover:bg-gray-100 transition"},[e("td",Te,[e("span",qe,b(t.user_name||"Unknown"),1),e("span",Oe," ("+b(t.user_level||"N/A")+") ",1)]),e("td",Re,[e("span",{class:Y({"text-green-600 font-semibold":t.event==="login","text-red-600 font-semibold":t.event==="logout","text-yellow-600 font-semibold":t.event==="failed"})},b(t.event),3)]),e("td",Ge,b(t.ip_address),1),e("td",He,b(m(t)),1),e("td",Je,b(i(t.created_at)),1)]))),128)),u.value.length===0?(n(),c("tr",Ke,a[1]||(a[1]=[e("td",{colspan:"5",class:"text-center py-4 text-gray-500"}," No login activity found. ",-1)]))):w("",!0)])])]))]))}},We=k(Qe,[["__scopeId","data-v-67acd59e"]]),Xe={class:"max-w-4xl mx-auto space-y-6"},Ze={class:"bg-white rounded-lg shadow-md p-6 border border-gray-200 w-full"},et={class:"space-y-3"},tt={class:"flex flex-col md:flex-row md:justify-between"},st={class:"font-medium text-gray-800"},ot={class:"flex flex-col md:flex-row md:justify-between"},rt={class:"font-medium text-gray-800"},lt={class:"flex flex-col md:flex-row md:justify-between"},at={class:"font-medium text-gray-800 capitalize"},nt={class:"bg-white rounded-lg shadow-md p-6 border border-gray-200 w-full"},it={class:"space-y-3"},dt={class:"flex flex-col md:flex-row md:justify-between"},ut={class:"font-medium text-gray-800"},ct={class:"mt-4"},bt={__name:"Settings",setup(h){const u=f(""),l=f(""),d=f(""),i=async()=>{try{const m=await y.get("/session");u.value=m.data.fullname,l.value=m.data.level,d.value=m.data.username,(!u.value||!l.value)&&(window.location.href="/")}catch{window.location.href="/"}};return $(()=>{i()}),(m,s)=>(n(),g(U,{fullname:u.value,userLevel:l.value,title:"Settings",class:"animate-slide-in-top"},{default:C(()=>[e("div",Xe,[e("div",Ze,[s[3]||(s[3]=e("h2",{class:"text-2xl font-bold text-mccblue mb-4 select-none"},"Profile Overview",-1)),e("div",et,[e("div",tt,[s[0]||(s[0]=e("span",{class:"text-gray-600"},"User ID:",-1)),e("span",st,b(d.value),1)]),e("div",ot,[s[1]||(s[1]=e("span",{class:"text-gray-600"},"Full Name:",-1)),e("span",rt,b(u.value),1)]),e("div",lt,[s[2]||(s[2]=e("span",{class:"text-gray-600"},"Role:",-1)),e("span",at,b(l.value),1)])])]),e("div",nt,[s[6]||(s[6]=e("h2",{class:"text-2xl font-bold text-mccblue mb-4 select-none"},"Security",-1)),e("div",it,[e("div",dt,[s[4]||(s[4]=e("span",{class:"text-gray-600"},"Username:",-1)),e("span",ut,b(d.value),1)]),s[5]||(s[5]=e("div",{class:"flex flex-col md:flex-row md:justify-between items-start md:items-center"},[e("span",{class:"text-gray-600"},"Password:"),e("span",{class:"font-medium text-gray-800"},"********")],-1)),e("div",ct,[_(he)])])]),l.value==="admin"?(n(),g(oe,{key:0,class:"select-none"})):w("",!0),l.value==="admin"?(n(),g(Ee,{key:1})):w("",!0),l.value==="admin"?(n(),g(We,{key:2})):w("",!0)])]),_:1},8,["fullname","userLevel"]))}};export{bt as default};
