import{o as J,z as ce,A as se,B as de,C as ue,D as fe,E as pe,r as re,g as R,d as G,e as i,G as me,H as we,n as Q,u as ee,q as ge,b as he,w as be,p as xe,f as te,i as ye,k as ve,y as ke,a as Ae}from"./app-CMI1OZD2.js";import{S as k}from"./sweetalert2.esm.all-BQIkj5Wb.js";const Ce=1/3,x=1/6,X=o=>Math.floor(o)|0,Y=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function Se(o=Math.random){const t=Pe(o),n=new Float64Array(t).map(f=>Y[f%12*3]),e=new Float64Array(t).map(f=>Y[f%12*3+1]),l=new Float64Array(t).map(f=>Y[f%12*3+2]);return function(r,h,a){let s,u,w,c;const F=(r+h+a)*Ce,U=X(r+F),m=X(h+F),d=X(a+F),g=(U+m+d)*x,E=U-g,le=m-g,ie=d-g,y=r-E,v=h-le,b=a-ie;let A,C,S,P,_,M;y>=v?v>=b?(A=1,C=0,S=0,P=1,_=1,M=0):y>=b?(A=1,C=0,S=0,P=1,_=0,M=1):(A=0,C=0,S=1,P=1,_=0,M=1):v<b?(A=0,C=0,S=1,P=0,_=1,M=1):y<b?(A=0,C=1,S=0,P=0,_=1,M=1):(A=0,C=1,S=0,P=1,_=1,M=0);const $=y-A+x,q=v-C+x,D=b-S+x,H=y-P+2*x,O=v-_+2*x,N=b-M+2*x,V=y-1+3*x,K=v-1+3*x,Z=b-1+3*x,W=U&255,I=m&255,L=d&255;let z=.6-y*y-v*v-b*b;if(z<0)s=0;else{const p=W+t[I+t[L]];z*=z,s=z*z*(n[p]*y+e[p]*v+l[p]*b)}let j=.6-$*$-q*q-D*D;if(j<0)u=0;else{const p=W+A+t[I+C+t[L+S]];j*=j,u=j*j*(n[p]*$+e[p]*q+l[p]*D)}let T=.6-H*H-O*O-N*N;if(T<0)w=0;else{const p=W+P+t[I+_+t[L+M]];T*=T,w=T*T*(n[p]*H+e[p]*O+l[p]*N)}let B=.6-V*V-K*K-Z*Z;if(B<0)c=0;else{const p=W+1+t[I+1+t[L+1]];B*=B,c=B*B*(n[p]*V+e[p]*K+l[p]*Z)}return 32*(s+u+w+c)}}function Pe(o){const n=new Uint8Array(512);for(let e=0;e<512/2;e++)n[e]=e;for(let e=0;e<512/2-1;e++){const l=e+~~(o()*(256-e)),f=n[e];n[e]=n[l],n[l]=f}for(let e=256;e<512;e++)n[e]=n[e-256];return n}function ae(o){var t,n,e="";if(typeof o=="string"||typeof o=="number")e+=o;else if(typeof o=="object")if(Array.isArray(o)){var l=o.length;for(t=0;t<l;t++)o[t]&&(n=ae(o[t]))&&(e&&(e+=" "),e+=n)}else for(n in o)o[n]&&(e&&(e+=" "),e+=n);return e}function _e(){for(var o,t,n=0,e="",l=arguments.length;n<l;n++)(o=arguments[n])&&(t=ae(o))&&(e&&(e+=" "),e+=t);return e}function ne(...o){return _e(...o)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Me(o){return se()}function Fe(o,t=!0,n){Me()?J(o,n):t?o():ce(o)}function Ue(o,t=null){const n=se();let e=()=>{};const l=de((f,r)=>(e=r,{get(){var h,a;return f(),(a=(h=n==null?void 0:n.proxy)==null?void 0:h.$refs[o])!=null?a:t},set(){}}));return Fe(e),ue(e),l}const ze=fe({__name:"WavyBackground",props:{class:{},containerClass:{},colors:{default:()=>["#43aac9","#2a7a9f","#00307a","#7ec8e3"]},waveWidth:{default:35},blur:{default:15},speed:{default:"fast"},waveOpacity:{default:.4}},setup(o){const t=o,n=Se();let e,l,f=0,r=null,h;const a=Ue("canvasRef");function s(){return t.speed==="slow"?.001:.002}function u(m){return .5+.5*Math.sin(m*7e-5*2*Math.PI)}function w(){const m=a.value;if(m&&(r=m.getContext("2d"),r)){const d=a.value.parentElement;d&&(e=r.canvas.width=d.clientWidth,l=r.canvas.height=d.clientHeight),r.filter=`blur(${t.blur}px)`,window.onresize=()=>{d&&r&&(e=r.canvas.width=d.clientWidth,l=r.canvas.height=d.clientHeight,r.filter=`blur(${t.blur}px)`)},F()}}function c(m){f+=s();for(let d=0;d<m;d++){r.beginPath(),r.lineWidth=t.waveWidth,r.strokeStyle=t.colors[d%t.colors.length];for(let g=0;g<e;g+=5){const E=n(g/800,.3*d,f)*100;r.lineTo(g,E+l*.5)}r.stroke(),r.closePath()}}function F(m=0){if(!r)return;const d=u(m),g=r.createLinearGradient(0,l*-d,0,l*(1-d));g.addColorStop(0,"#43aac9"),g.addColorStop(1,"#f9fafc"),r.globalAlpha=1,r.fillStyle=g,r.fillRect(0,0,e,l),r.globalAlpha=t.waveOpacity,c(10),h=requestAnimationFrame(F)}pe(()=>{cancelAnimationFrame(h)});const U=re(!1);return J(()=>{U.value=typeof window<"u"&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome"),w()}),(m,d)=>(G(),R("div",{class:Q(ee(ne)("h-screen flex flex-col items-center justify-center",t.containerClass))},[i("canvas",{id:"canvas",ref_key:"canvasRef",ref:a,class:"absolute z-0",style:me({filter:U.value?`blur(${t.blur}px)`:void 0})},null,4),i("div",{class:Q(ee(ne)("relative z-10",t.class))},[we(m.$slots,"default")],2)],2))}}),je={class:"flex w-full mx-auto md:flex-row flex-col items-center justify-between gap-x-60 md:px-20"},Te={class:"w-full md:w-1/2 flex items-center justify-center py-8 animate-slide-in-top"},Be={class:"w-[90%] md:max-w-sm bg-white p-6 rounded-lg shadow-xl border border-gray-200"},Ge={class:"relative"},We={class:"relative"},Ie=["type"],Le={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Re={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},oe="6LdfZ8srAAAAADvFR2fb8TaU1F-7GEmsk9qu9Sdt",qe={__name:"Login",setup(o){const t=ge({Username:"",Password:"",recaptcha_token:"",remember:!1}),n=re(!1);function e(){n.value=!n.value}function l(){}J(()=>{if(!window.grecaptcha){const a=document.createElement("script");a.src="https://www.google.com/recaptcha/api.js?render=6LdfZ8srAAAAADvFR2fb8TaU1F-7GEmsk9qu9Sdt",a.async=!0,a.defer=!0,document.head.appendChild(a)}});async function f(a="login"){return!window.grecaptcha||!oe?(console.warn("reCAPTCHA not loaded or siteKey missing"),null):(await new Promise(s=>window.grecaptcha.ready(s)),await window.grecaptcha.execute(oe,{action:a}))}async function r(){var a,s;if(!t.Username||!t.Password)return k.fire({icon:"error",title:"Oops...",text:"Please fill in both Username and Password."});try{const u=await f("login");if(!u)return k.fire("reCAPTCHA Failed","Please refresh and try again.","error");const w=await Ae.post("/custom-login",{...t,recaptcha_token:u}),c=w.data.fullname||"User";k.fire({icon:"success",title:"Login Successful!",text:"Welcome, "+c+"!",timer:1800,showConfirmButton:!1}).then(()=>{window.location.href=w.data.redirect})}catch(u){const w=(a=u.response)==null?void 0:a.status,c=(s=u.response)==null?void 0:s.data;w===422&&(c==null?void 0:c.error)==="recaptcha_failed"?k.fire("reCAPTCHA Failed","Verification failed. Please try again.","error"):w===404&&(c==null?void 0:c.error)==="not_found"?k.fire("User Not Found","No account with that Username.","error"):w===401&&(c==null?void 0:c.error)==="wrong_password"?k.fire("Incorrect Password",`Wrong password. ${c.attempts} attempt(s) remaining.`,"error"):w===429&&(c==null?void 0:c.error)==="locked"?h():k.fire("Login Failed","Something went wrong. Please try again.","error")}}function h(){let a=60;k.fire({title:"Too Many Attempts",html:`Try again in <b>${a}</b> seconds.`,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{const s=k.getHtmlContainer().querySelector("b"),u=setInterval(()=>{a--,s.textContent=a,a<=0&&(clearInterval(u),location.reload())},1e3)}})}return(a,s)=>(G(),he(ze,null,{default:be(()=>[i("div",je,[s[8]||(s[8]=i("div",{class:"flex flex-col justify-center items-center md:w-1/2 px-6 py-10 md:-mt-20 animate-slide-in-top"},[i("div",{class:"w-full max-w-md text-center"},[i("img",{src:"/logo.png",alt:"Logo",class:"h-52 select-none md:h-80 mb-[-70px] md:mb-[-35px] mx-auto"}),i("p",{class:"hidden md:block text-lg md:text-xl text-mccmidnightblue mt-0"}," Monitor your grades in real-time with MCCâ€™s official grading and info system. ")])],-1)),i("div",Te,[i("div",Be,[i("form",{onSubmit:xe(r,["prevent"]),class:"space-y-4"},[i("div",Ge,[te(i("input",{"onUpdate:modelValue":s[0]||(s[0]=u=>t.Username=u),type:"text",id:"username",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 pt-6 pb-2 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",placeholder:"",required:""},null,512),[[ye,t.Username]]),s[2]||(s[2]=i("label",{for:"username",class:"select-none absolute left-3 top-1 text-sm text-gray-500 transition-all peer-placeholder-shown:top-4 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-1 peer-focus:text-sm peer-focus:text-mccblue"}," Username ",-1))]),i("div",We,[te(i("input",{"onUpdate:modelValue":s[1]||(s[1]=u=>t.Password=u),type:n.value?"text":"password",id:"password",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 pt-6 pb-2 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",placeholder:"",required:"",onInput:l},null,40,Ie),[[ke,t.Password]]),s[5]||(s[5]=i("label",{for:"password",class:"select-none absolute left-3 top-1 text-sm text-gray-500 transition-all peer-placeholder-shown:top-4 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-1 peer-focus:text-sm peer-focus:text-mccblue"}," Password ",-1)),t.Password?(G(),R("button",{key:0,type:"button",onClick:e,class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-mccblue transition"},[n.value?(G(),R("svg",Re,s[4]||(s[4]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a10.036 10.036 0 013.262-4.572M9.88 9.88a3 3 0 104.24 4.24M6.1 6.1l11.8 11.8"},null,-1)]))):(G(),R("svg",Le,s[3]||(s[3]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-.728 2.314-2.254 4.33-4.293 5.657M15 12a3 3 0 01-6 0"},null,-1)])))])):ve("",!0)]),s[6]||(s[6]=i("button",{type:"submit",class:"w-full select-none bg-mccblue hover:bg-mccdarkblue text-white font-semibold py-2 rounded-md transition duration-200"}," Log In ",-1)),s[7]||(s[7]=i("div",{class:"text-center"},[i("a",{href:"#",class:"text-mccblue hover:underline text-sm transition"},"Forgot Password?")],-1))],32)])])])]),_:1}))}};export{qe as default};
