import{r as p,g as c,d as i,e,b as g,l as h,w as C,k as y,p as S,f as x,i as Y,a2 as _,T as A,L as j,a as w,o as M,F as B,h as F,t as v,c as D,y as $,n as U}from"./app-h29nfEoJ.js";import{_ as L}from"./DashboardLayout-B0p0wxmb.js";import{S as f}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},V={class:"bg-white w-full max-w-md p-6 rounded-xl shadow-lg relative animate-fade-in-up"},E={class:"flex flex-col gap-2"},N={class:"inline-flex items-center gap-2"},I={class:"inline-flex items-center gap-2"},T={class:"inline-flex items-center gap-2"},q={__name:"AcademicYearForm",emits:["submitted"],setup(k,{emit:m}){const a=m,d=p(!1),l=p({academic_year:"",semester:""}),u=()=>{d.value=!1,l.value={academic_year:"",semester:""}},r=async()=>{if(!/^\d{4}-\d{4}$/.test(l.value.academic_year))return f.fire({icon:"error",title:"Invalid Format",text:"Academic Year must be in the format xxxx-xxxx (e.g. 2025-2026)."});try{const{data:t}=await w.get("/ay");if(t.length>=4)return f.fire({icon:"error",title:"Limit Reached",text:"You can only have up to 4 academic year entries."});const o=parseInt(l.value.semester);if(t.find(n=>n.academicyear===l.value.academic_year&&parseInt(n.semester)===o))return f.fire({icon:"error",title:"Duplicate Entry",text:"This academic year and semester already exists."});await w.post("/settings/academic-year",{academicyear:l.value.academic_year,semester:o,display:0}),u(),f.fire({icon:"success",title:"Academic Year Added",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1}),a("submitted")}catch(t){console.error("Error saving academic year:",t),f.fire("Error","Could not save academic year","error")}};return(b,t)=>(i(),c("div",null,[e("button",{onClick:t[0]||(t[0]=o=>d.value=!0),class:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md transition"},t[5]||(t[5]=[e("p",{class:"text-xs md:text-base"}," + New Academic Year ",-1)])),(i(),g(j,{to:"body"},[h(A,{name:"fade"},{default:C(()=>[d.value?(i(),c("div",z,[e("div",V,[t[12]||(t[12]=e("h2",{class:"text-xl font-bold mb-4 text-mccblue"},"Create Academic Year",-1)),e("form",{onSubmit:S(r,["prevent"]),class:"space-y-4"},[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Academic Year",-1)),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.academic_year=o),type:"text",placeholder:"e.g. 2025-2026",class:"w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",required:""},null,512),[[Y,l.value.academic_year]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Semester",-1)),e("div",E,[e("label",N,[x(e("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=o=>l.value.semester=o),value:"1",class:"focus:ring-0 cursor-pointer",required:""},null,512),[[_,l.value.semester]]),t[7]||(t[7]=e("span",null,"First Semester",-1))]),e("label",I,[x(e("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=o=>l.value.semester=o),value:"2",class:"focus:ring-0 cursor-pointer"},null,512),[[_,l.value.semester]]),t[8]||(t[8]=e("span",null,"Second Semester",-1))]),e("label",T,[x(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=o=>l.value.semester=o),value:"3",class:"focus:ring-0 cursor-pointer"},null,512),[[_,l.value.semester]]),t[9]||(t[9]=e("span",null,"Summer",-1))])])]),e("div",{class:"flex justify-end gap-4 pt-2"},[e("button",{type:"button",onClick:u,class:"text-gray-500 hover:text-red-500 transition"},"Cancel"),t[11]||(t[11]=e("button",{type:"submit",class:"bg-mccblue hover:bg-mccdarkblue text-white px-4 py-2 rounded-md transition"},"Save",-1))])],32),e("button",{onClick:u,class:"absolute top-4 right-4 text-gray-500 text-2xl hover:text-red-500 transition"}," × ")])])):y("",!0)]),_:1})]))]))}},O=P(q,[["__scopeId","data-v-5ebe8fca"]]),R={class:"p-6 rounded-xl shadow-xl bg-white text-gray-800"},G={class:"md:flex md:justify-between items-center"},H={class:"w-full border-separate border-spacing-y-2 table-fixed"},J={class:"px-4 py-2"},K={class:"px-4 py-2 text-center"},Q={class:"px-4 py-2 text-right"},W={class:"flex justify-end items-center gap-4"},X={class:"inline-flex items-center cursor-pointer"},Z=["checked","onChange"],ee=["onClick"],te={key:0},se={__name:"AcademicYearList",setup(k){const m=p(""),a=p(""),d=p([]),l=async()=>{const{data:t}=await w.get("/session");m.value=t.fullname,a.value=t.level,(!m.value||!a.value)&&(window.location.href="/")},u=async()=>{const{data:t}=await w.get("/ay");d.value=t},r=async t=>{try{const o=t.display?0:1;await w.post("/ay/toggle-display",{id:t.id,display:o}),t.display=o,f.fire({icon:"success",title:"Academic Year Display Updated",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1})}catch{f.fire("Error","Could not update academic year","error")}},b=async t=>{if((await f.fire({title:"Are you sure?",text:`Delete Academic Year ${t.academicyear} - ${t.semester==="1"?"First Semester":t.semester==="2"?"Second Semester":"Summer"}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#e3342f",cancelButtonColor:"#6c757d",confirmButtonText:"Yes"})).isConfirmed)try{await w.delete(`/ay/${t.id}`),d.value=d.value.filter(s=>s.id!==t.id),f.fire({icon:"success",title:"Academic Year Deleted",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1})}catch{f.fire("Error","Could not delete academic year","error")}};return M(()=>{l(),u()}),(t,o)=>(i(),c("div",R,[e("div",G,[o[0]||(o[0]=e("h2",{class:"text-2xl font-semibold mb-2 md:mb-4 ml-2 text-mccblue"},"Academic Year List",-1)),h(O,{onSubmitted:u,class:"md:mt-[-17px] mb-2 md:mb-0"})]),o[4]||(o[4]=e("hr",{class:"border-t border-gray-300 mb-4"},null,-1)),e("table",H,[o[3]||(o[3]=e("thead",{class:"bg-mccblue text-white"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left w-1/3"},"Academic Year"),e("th",{class:"px-4 py-2 text-center w-1/3"},"Semester"),e("th",{class:"px-4 py-2 text-right w-1/3"},"Display")])],-1)),e("tbody",null,[(i(!0),c(B,null,F(d.value,s=>(i(),c("tr",{key:s.id,class:"bg-white text-gray-800 border hover:bg-gray-100 transition"},[e("td",J,v(s.academicyear),1),e("td",K,v(s.semester==="1"?"First Semester":s.semester==="2"?"Second Semester":"Summer"),1),e("td",Q,[e("div",W,[e("label",X,[e("input",{type:"checkbox",class:"sr-only",checked:s.display,onChange:n=>r(s)},null,40,Z),o[1]||(o[1]=e("span",{class:"relative w-10 h-6 bg-gray-300 rounded-full transition-colors duration-300 block"},[e("span",{class:"absolute top-[2px] left-[2px] w-5 h-5 bg-white rounded-full transition-transform duration-300 ball"})],-1))]),e("button",{onClick:n=>b(s),class:"text-red-500 hover:text-red-700",title:"Delete"}," 🗑️ ",8,ee)])])]))),128)),d.value.length===0?(i(),c("tr",te,o[2]||(o[2]=[e("td",{colspan:"3",class:"text-center py-4 text-gray-500"},"No academic years available.",-1)]))):y("",!0)])])]))}},oe=P(se,[["__scopeId","data-v-776eabcc"]]),ae={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},re={class:"bg-white w-full max-w-md p-6 rounded-xl shadow-lg relative animate-fade-in-up"},le={class:"relative"},ne=["type"],ie={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},de={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},ue={class:"relative"},ce=["type"],me={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},pe={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},fe={class:"relative"},we=["type"],xe={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},ve={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},be={class:"flex justify-end gap-4 pt-2"},ye=["disabled"],ge={__name:"ChangePasswordForm",setup(k){const m=p(!1),a=p({oldPassword:"",newPassword:"",confirmPassword:""}),d=p(!1),l=p(!1),u=p(!1),r=D(()=>a.value.newPassword&&a.value.newPassword===a.value.confirmPassword),b=async()=>{var o,s;if(!r.value){f.fire({icon:"warning",title:"Passwords do not match!"});return}try{const n=await w.post("/settings/update-password",{oldPassword:a.value.oldPassword,newPassword:a.value.newPassword});a.value.oldPassword="",a.value.newPassword="",a.value.confirmPassword="",f.fire({icon:"success",title:n.data.message||"Password Updated!"}),t()}catch(n){f.fire({icon:"error",title:((s=(o=n.response)==null?void 0:o.data)==null?void 0:s.message)||"Error updating password."}),console.error(n)}},t=()=>{m.value=!1,a.value={oldPassword:"",newPassword:"",confirmPassword:""}};return(o,s)=>(i(),c("div",null,[e("button",{onClick:s[0]||(s[0]=n=>m.value=!0),class:"bg-mccblue hover:bg-mccdarkblue text-white font-semibold py-2 px-4 rounded-md transition"}," Change Password "),(i(),g(j,{to:"body"},[h(A,{name:"fade"},{default:C(()=>[m.value?(i(),c("div",ae,[e("div",re,[s[16]||(s[16]=e("h2",{class:"text-xl font-bold mb-4 text-mccblue select-none"},"Change Password",-1)),e("form",{onSubmit:S(b,["prevent"]),class:"space-y-5"},[e("div",le,[s[9]||(s[9]=e("label",{for:"oldPassword",class:"block text-sm font-medium text-gray-700 mb-1"},"Old Password",-1)),x(e("input",{type:d.value?"text":"password",id:"oldPassword","onUpdate:modelValue":s[1]||(s[1]=n=>a.value.oldPassword=n),required:"",placeholder:"Enter old password",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition"},null,8,ne),[[$,a.value.oldPassword]]),e("button",{type:"button",tabindex:"-1",onClick:s[2]||(s[2]=n=>d.value=!d.value),class:"absolute right-3 top-9 text-gray-500 hover:text-mccblue transition"},[d.value?(i(),c("svg",de,s[8]||(s[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 1.274-4.057 5.064-7 9.542-7 1.011 0 1.988.149 2.91.425M15 12a3 3 0 01-6 0m-6.9-5.9l13.8 13.8"},null,-1)]))):(i(),c("svg",ie,s[7]||(s[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.478 0-8.268-2.943-9.542-7z"},null,-1)])))])]),e("div",ue,[s[12]||(s[12]=e("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700 mb-1"},"New Password",-1)),x(e("input",{type:l.value?"text":"password",id:"newPassword","onUpdate:modelValue":s[3]||(s[3]=n=>a.value.newPassword=n),required:"",placeholder:"Enter new password",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition"},null,8,ce),[[$,a.value.newPassword]]),e("button",{type:"button",tabindex:"-1",onClick:s[4]||(s[4]=n=>l.value=!l.value),class:"absolute right-3 top-9 text-gray-500 hover:text-mccblue transition"},[l.value?(i(),c("svg",pe,s[11]||(s[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 1.274-4.057 5.064-7 9.542-7 1.011 0 1.988.149 2.91.425M15 12a3 3 0 01-6 0m-6.9-5.9l13.8 13.8"},null,-1)]))):(i(),c("svg",me,s[10]||(s[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.478 0-8.268-2.943-9.542-7z"},null,-1)])))])]),e("div",fe,[s[15]||(s[15]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-1"},"Confirm New Password",-1)),x(e("input",{type:u.value?"text":"password",id:"confirmPassword","onUpdate:modelValue":s[5]||(s[5]=n=>a.value.confirmPassword=n),required:"",placeholder:"Confirm new password",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition"},null,8,we),[[$,a.value.confirmPassword]]),e("button",{type:"button",tabindex:"-1",onClick:s[6]||(s[6]=n=>u.value=!u.value),class:"absolute right-3 top-9 text-gray-500 hover:text-mccblue transition"},[u.value?(i(),c("svg",ve,s[14]||(s[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 1.274-4.057 5.064-7 9.542-7 1.011 0 1.988.149 2.91.425M15 12a3 3 0 01-6 0m-6.9-5.9l13.8 13.8"},null,-1)]))):(i(),c("svg",xe,s[13]||(s[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.478 0-8.268-2.943-9.542-7z"},null,-1)])))])]),a.value.confirmPassword?(i(),c("div",{key:0,class:U(["text-sm font-medium",r.value?"text-green-600":"text-red-600"])},v(r.value?"Passwords match":"Passwords do not match"),3)):y("",!0),e("div",be,[e("button",{type:"button",onClick:t,class:"text-gray-500 hover:text-red-500 transition"},"Cancel"),e("button",{type:"submit",disabled:!r.value,class:"bg-mccblue hover:bg-mccdarkblue text-white px-4 py-2 rounded-md transition"},"Update",8,ye)])],32),e("button",{onClick:t,class:"absolute top-4 right-4 text-gray-500 text-2xl hover:text-red-500 transition"}," × ")])])):y("",!0)]),_:1})]))]))}},he=P(ge,[["__scopeId","data-v-871821e4"]]),ke={class:"max-w-4xl mx-auto space-y-6"},_e={class:"bg-white rounded-lg shadow-md p-6 border border-gray-200 w-full"},$e={class:"space-y-3"},Ce={class:"flex flex-col md:flex-row md:justify-between"},Pe={class:"font-medium text-gray-800"},Se={class:"flex flex-col md:flex-row md:justify-between"},Ae={class:"font-medium text-gray-800"},je={class:"flex flex-col md:flex-row md:justify-between"},Me={class:"font-medium text-gray-800 capitalize"},Ye={class:"bg-white rounded-lg shadow-md p-6 border border-gray-200 w-full"},Be={class:"space-y-3"},Fe={class:"flex flex-col md:flex-row md:justify-between"},De={class:"font-medium text-gray-800"},Ue={class:"mt-4"},Ne={__name:"Settings",setup(k){const m=p(""),a=p(""),d=p(""),l=async()=>{try{const u=await w.get("/session");m.value=u.data.fullname,a.value=u.data.level,d.value=u.data.username,(!m.value||!a.value)&&(window.location.href="/")}catch{window.location.href="/"}};return M(()=>{l()}),(u,r)=>(i(),g(L,{fullname:m.value,userLevel:a.value,title:"Settings",class:"animate-slide-in-top"},{default:C(()=>[e("div",ke,[e("div",_e,[r[3]||(r[3]=e("h2",{class:"text-2xl font-bold text-mccblue mb-4 select-none"},"Profile Overview",-1)),e("div",$e,[e("div",Ce,[r[0]||(r[0]=e("span",{class:"text-gray-600"},"User ID:",-1)),e("span",Pe,v(d.value),1)]),e("div",Se,[r[1]||(r[1]=e("span",{class:"text-gray-600"},"Full Name:",-1)),e("span",Ae,v(m.value),1)]),e("div",je,[r[2]||(r[2]=e("span",{class:"text-gray-600"},"Role:",-1)),e("span",Me,v(a.value),1)])])]),e("div",Ye,[r[6]||(r[6]=e("h2",{class:"text-2xl font-bold text-mccblue mb-4 select-none"},"Security",-1)),e("div",Be,[e("div",Fe,[r[4]||(r[4]=e("span",{class:"text-gray-600"},"Username:",-1)),e("span",De,v(d.value),1)]),r[5]||(r[5]=e("div",{class:"flex flex-col md:flex-row md:justify-between items-start md:items-center"},[e("span",{class:"text-gray-600"},"Password:"),e("span",{class:"font-medium text-gray-800"},"********")],-1)),e("div",Ue,[h(he)])])]),a.value==="admin"?(i(),g(oe,{key:0,class:"select-none"})):y("",!0)])]),_:1},8,["fullname","userLevel"]))}};export{Ne as default};
