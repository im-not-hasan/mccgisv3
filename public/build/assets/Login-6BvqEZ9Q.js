import{o as J,z as ie,A as oe,B as ce,C as de,D as ue,E as fe,r as re,g as L,d as W,e as i,G as pe,H as me,n as Q,u as ee,q as we,b as ge,w as he,p as be,f as te,i as xe,k as ye,y as ve,a as ke}from"./app-BgyXi-Fv.js";import{S as C}from"./sweetalert2.esm.all-BQIkj5Wb.js";const Ce=1/3,y=1/6,X=o=>Math.floor(o)|0,Y=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function Ae(o=Math.random){const t=Se(o),n=new Float64Array(t).map(f=>Y[f%12*3]),e=new Float64Array(t).map(f=>Y[f%12*3+1]),a=new Float64Array(t).map(f=>Y[f%12*3+2]);return function(s,b,g){let c,r,u,w;const l=(s+b+g)*Ce,F=X(s+l),m=X(b+l),d=X(g+l),h=(F+m+d)*y,R=F-h,ae=m-h,le=d-h,v=s-R,k=b-ae,x=g-le;let A,S,P,_,M,z;v>=k?k>=x?(A=1,S=0,P=0,_=1,M=1,z=0):v>=x?(A=1,S=0,P=0,_=1,M=0,z=1):(A=0,S=0,P=1,_=1,M=0,z=1):k<x?(A=0,S=0,P=1,_=0,M=1,z=1):v<x?(A=0,S=1,P=0,_=0,M=1,z=1):(A=0,S=1,P=0,_=1,M=1,z=0);const E=v-A+y,H=k-S+y,O=x-P+y,q=v-_+2*y,D=k-M+2*y,N=x-z+2*y,V=v-1+3*y,K=k-1+3*y,Z=x-1+3*y,G=F&255,I=m&255,$=d&255;let U=.6-v*v-k*k-x*x;if(U<0)c=0;else{const p=G+t[I+t[$]];U*=U,c=U*U*(n[p]*v+e[p]*k+a[p]*x)}let j=.6-E*E-H*H-O*O;if(j<0)r=0;else{const p=G+A+t[I+S+t[$+P]];j*=j,r=j*j*(n[p]*E+e[p]*H+a[p]*O)}let T=.6-q*q-D*D-N*N;if(T<0)u=0;else{const p=G+_+t[I+M+t[$+z]];T*=T,u=T*T*(n[p]*q+e[p]*D+a[p]*N)}let B=.6-V*V-K*K-Z*Z;if(B<0)w=0;else{const p=G+1+t[I+1+t[$+1]];B*=B,w=B*B*(n[p]*V+e[p]*K+a[p]*Z)}return 32*(c+r+u+w)}}function Se(o){const n=new Uint8Array(512);for(let e=0;e<512/2;e++)n[e]=e;for(let e=0;e<512/2-1;e++){const a=e+~~(o()*(256-e)),f=n[e];n[e]=n[a],n[a]=f}for(let e=256;e<512;e++)n[e]=n[e-256];return n}function se(o){var t,n,e="";if(typeof o=="string"||typeof o=="number")e+=o;else if(typeof o=="object")if(Array.isArray(o)){var a=o.length;for(t=0;t<a;t++)o[t]&&(n=se(o[t]))&&(e&&(e+=" "),e+=n)}else for(n in o)o[n]&&(e&&(e+=" "),e+=n);return e}function Pe(){for(var o,t,n=0,e="",a=arguments.length;n<a;n++)(o=arguments[n])&&(t=se(o))&&(e&&(e+=" "),e+=t);return e}function ne(...o){return Pe(...o)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function _e(o){return oe()}function Me(o,t=!0,n){_e()?J(o,n):t?o():ie(o)}function ze(o,t=null){const n=oe();let e=()=>{};const a=ce((f,s)=>(e=s,{get(){var b,g;return f(),(g=(b=n==null?void 0:n.proxy)==null?void 0:b.$refs[o])!=null?g:t},set(){}}));return Me(e),de(e),a}const Fe=ue({__name:"WavyBackground",props:{class:{},containerClass:{},colors:{default:()=>["#43aac9","#2a7a9f","#00307a","#7ec8e3"]},waveWidth:{default:35},blur:{default:15},speed:{default:"fast"},waveOpacity:{default:.4}},setup(o){const t=o,n=Ae();let e,a,f=0,s=null,b;const g=ze("canvasRef");function c(){return t.speed==="slow"?.001:.002}function r(m){return .5+.5*Math.sin(m*7e-5*2*Math.PI)}function u(){const m=g.value;if(m&&(s=m.getContext("2d"),s)){const d=g.value.parentElement;d&&(e=s.canvas.width=d.clientWidth,a=s.canvas.height=d.clientHeight),s.filter=`blur(${t.blur}px)`,window.onresize=()=>{d&&s&&(e=s.canvas.width=d.clientWidth,a=s.canvas.height=d.clientHeight,s.filter=`blur(${t.blur}px)`)},l()}}function w(m){f+=c();for(let d=0;d<m;d++){s.beginPath(),s.lineWidth=t.waveWidth,s.strokeStyle=t.colors[d%t.colors.length];for(let h=0;h<e;h+=5){const R=n(h/800,.3*d,f)*100;s.lineTo(h,R+a*.5)}s.stroke(),s.closePath()}}function l(m=0){if(!s)return;const d=r(m),h=s.createLinearGradient(0,a*-d,0,a*(1-d));h.addColorStop(0,"#43aac9"),h.addColorStop(1,"#f9fafc"),s.globalAlpha=1,s.fillStyle=h,s.fillRect(0,0,e,a),s.globalAlpha=t.waveOpacity,w(10),b=requestAnimationFrame(l)}fe(()=>{cancelAnimationFrame(b)});const F=re(!1);return J(()=>{F.value=typeof window<"u"&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome"),u()}),(m,d)=>(W(),L("div",{class:Q(ee(ne)("h-screen flex flex-col items-center justify-center",t.containerClass))},[i("canvas",{id:"canvas",ref_key:"canvasRef",ref:g,class:"absolute z-0",style:pe({filter:F.value?`blur(${t.blur}px)`:void 0})},null,4),i("div",{class:Q(ee(ne)("relative z-10",t.class))},[me(m.$slots,"default")],2)],2))}}),Ue={class:"flex w-full mx-auto md:flex-row flex-col items-center justify-between gap-x-60 md:px-20"},je={class:"w-full md:w-1/2 flex items-center justify-center py-8 animate-slide-in-top"},Te={class:"w-[90%] md:max-w-sm bg-white p-6 rounded-lg shadow-xl border border-gray-200"},Be={class:"relative"},We={class:"relative"},Ge=["type"],Ie={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},$e={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},Ee={__name:"Login",setup(o){const t=we({Username:"",Password:"",recaptcha_token:"",remember:!1}),n=re(!1);let e="6LdfZ8srAAAAADvFR2fb8TaU1F-7GEmsk9qu9Sdt";function a(){n.value=!n.value}function f(){}J(()=>{if(!window.grecaptcha){const c=document.createElement("script");c.src=`https://www.google.com/recaptcha/api.js?render=${e}`,c.async=!0,c.defer=!0,document.head.appendChild(c)}});async function s(c="login"){return!window.grecaptcha||!e?(console.warn("reCAPTCHA not loaded or siteKey missing"),null):(await new Promise(r=>window.grecaptcha.ready(r)),await window.grecaptcha.execute(e,{action:c}))}async function b(){var c,r;if(!t.Username||!t.Password)return C.fire({icon:"error",title:"Oops...",text:"Please fill in both Username and Password."});try{const u=await s("login");if(!u)return C.fire("reCAPTCHA Failed","Please refresh and try again.","error");const w=await ke.post("/custom-login",{...t,recaptcha_token:u}),l=w.data.fullname||"User";C.fire({icon:"success",title:"Login Successful!",text:"Welcome, "+l+"!",timer:1800,showConfirmButton:!1}).then(()=>{window.location.href=w.data.redirect})}catch(u){const w=(c=u.response)==null?void 0:c.status,l=(r=u.response)==null?void 0:r.data;w===422&&(l==null?void 0:l.error)==="recaptcha_failed"?C.fire("reCAPTCHA Failed","Verification failed. Please try again.","error"):w===404&&(l==null?void 0:l.error)==="not_found"?C.fire("User Not Found","No account with that Username.","error"):w===401&&(l==null?void 0:l.error)==="wrong_password"?C.fire("Incorrect Password",`Wrong password. ${l.attempts} attempt(s) remaining.`,"error"):w===429&&(l==null?void 0:l.error)==="locked"?g():C.fire("Login Failed","Something went wrong. Please try again.","error")}}function g(){let c=60;C.fire({title:"Too Many Attempts",html:`Try again in <b>${c}</b> seconds.`,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{const r=C.getHtmlContainer().querySelector("b"),u=setInterval(()=>{c--,r.textContent=c,c<=0&&(clearInterval(u),location.reload())},1e3)}})}return(c,r)=>(W(),ge(Fe,null,{default:he(()=>[i("div",Ue,[r[8]||(r[8]=i("div",{class:"flex flex-col justify-center items-center md:w-1/2 px-6 py-10 md:-mt-20 animate-slide-in-top"},[i("div",{class:"w-full max-w-md text-center"},[i("img",{src:"/logo.png",alt:"Logo",class:"h-52 select-none md:h-80 mb-[-70px] md:mb-[-35px] mx-auto"}),i("p",{class:"hidden md:block text-lg md:text-xl text-mccmidnightblue mt-0"}," Monitor your grades in real-time with MCCâ€™s official grading and info system. ")])],-1)),i("div",je,[i("div",Te,[i("form",{onSubmit:be(b,["prevent"]),class:"space-y-4"},[i("div",Be,[te(i("input",{"onUpdate:modelValue":r[0]||(r[0]=u=>t.Username=u),type:"text",id:"username",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 pt-6 pb-2 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",placeholder:"",required:""},null,512),[[xe,t.Username]]),r[2]||(r[2]=i("label",{for:"username",class:"select-none absolute left-3 top-1 text-sm text-gray-500 transition-all peer-placeholder-shown:top-4 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-1 peer-focus:text-sm peer-focus:text-mccblue"}," Username ",-1))]),i("div",We,[te(i("input",{"onUpdate:modelValue":r[1]||(r[1]=u=>t.Password=u),type:n.value?"text":"password",id:"password",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 pt-6 pb-2 placeholder-transparent focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",placeholder:"",required:"",onInput:f},null,40,Ge),[[ve,t.Password]]),r[5]||(r[5]=i("label",{for:"password",class:"select-none absolute left-3 top-1 text-sm text-gray-500 transition-all peer-placeholder-shown:top-4 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-1 peer-focus:text-sm peer-focus:text-mccblue"}," Password ",-1)),t.Password?(W(),L("button",{key:0,type:"button",onClick:a,class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-mccblue transition"},[n.value?(W(),L("svg",$e,r[4]||(r[4]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a10.036 10.036 0 013.262-4.572M9.88 9.88a3 3 0 104.24 4.24M6.1 6.1l11.8 11.8"},null,-1)]))):(W(),L("svg",Ie,r[3]||(r[3]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-.728 2.314-2.254 4.33-4.293 5.657M15 12a3 3 0 01-6 0"},null,-1)])))])):ye("",!0)]),r[6]||(r[6]=i("button",{type:"submit",class:"w-full select-none bg-mccblue hover:bg-mccdarkblue text-white font-semibold py-2 rounded-md transition duration-200"}," Log In ",-1)),r[7]||(r[7]=i("div",{class:"text-center"},[i("a",{href:"#",class:"text-mccblue hover:underline text-sm transition"},"Forgot Password?")],-1))],32)])])])]),_:1}))}};export{Ee as default};
