import{r as b,K as ne,g as u,d,e,b as le,l as Q,w as se,k as z,t as c,p as re,f as k,i as L,v as K,T as ae,L as ue,a as I,n as ie,F as A,h as T,z as ce,M as me,c as ee,o as pe,u as te,j as G}from"./app-h29nfEoJ.js";import{S as f}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{_ as be}from"./DashboardLayout-B0p0wxmb.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ve={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},fe={class:"bg-white w-full max-w-3xl p-6 rounded-xl shadow-lg relative animate-fade-in-up"},ge={class:"text-xl font-bold mb-4 text-mccblue select-none"},xe={__name:"InstructorForm",props:{course:String,editMode:Boolean,instructorToEdit:Object},emits:["submitted","cancelEdit"],setup(V,{emit:R}){const x=R,y=V,C=b(!1),$=y.course,r=b({teachid:"",fname:"",mname:"",lname:"",sex:"",age:"",email:"",phone:"",department:$}),S=()=>{r.value={teachid:"",fname:"",mname:"",lname:"",sex:"",age:"",email:"",phone:"",department:$}},N=()=>{y.editMode||(S(),C.value=!0)},E=()=>{C.value=!1,S(),x("cancelEdit")};ne(()=>y.instructorToEdit,m=>{y.editMode&&m&&(r.value={teachid:m.teachid,fname:m.fname,mname:m.mname,lname:m.lname,sex:m.sex,age:m.age,email:m.email,phone:m.phone,department:$},C.value=!0)},{immediate:!0});const a=()=>{r.value.phone=r.value.phone.replace(/\D/g,"")},h=async m=>{try{return(await I.get(`/api/instructors/check/${m}`)).data.exists}catch(s){return console.error("Failed to check teachid:",s),!1}},M=async()=>{var m;if(!y.editMode&&await h(r.value.teachid)){f.fire("Error","Teacher ID already exists. Please use a unique ID.","error");return}try{y.editMode&&((m=y.instructorToEdit)!=null&&m.id)?(await I.put(`/instructors/${y.instructorToEdit.id}`,r.value),f.fire({icon:"success",title:"Instructor Updated",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1})):(await I.post("/instructors",r.value),f.fire({icon:"success",title:"Instructor Added",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1})),S(),C.value=!1,x("submitted")}catch(s){f.fire("Error","Could not save instructor","error"),console.error("Instructor save error:",s)}};return(m,s)=>(d(),u("div",null,[e("button",{onClick:N,class:"bg-mccblue hover:bg-mccdarkblue text-white px-4 py-2 rounded-lg shadow-md transition"}," + Add Instructor "),(d(),le(ue,{to:"body"},[Q(ae,{name:"fade"},{default:se(()=>[C.value?(d(),u("div",ve,[e("div",fe,[e("h2",ge,c(V.editMode?"Edit Instructor":"Add New Instructor"),1),e("form",{onSubmit:re(M,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"Teacher ID",-1)),k(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=v=>r.value.teachid=v),placeholder:"e.g. 20001234",maxlength:"8",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",required:""},null,512),[[L,r.value.teachid]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"First Name",-1)),k(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=v=>r.value.fname=v),placeholder:"e.g. Juan",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",required:""},null,512),[[L,r.value.fname]])]),e("div",null,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"Middle Name",-1)),k(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=v=>r.value.mname=v),placeholder:"Leave blank if N/A",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition"},null,512),[[L,r.value.mname]])]),e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"Last Name",-1)),k(e("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=v=>r.value.lname=v),placeholder:"e.g. Dela Cruz",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",required:""},null,512),[[L,r.value.lname]])]),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"Gender",-1)),k(e("select",{"onUpdate:modelValue":s[4]||(s[4]=v=>r.value.sex=v),class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",required:""},s[12]||(s[12]=[e("option",{value:"",disabled:""},"Select gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[K,r.value.sex]])]),e("div",null,[s[14]||(s[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"Age",-1)),k(e("input",{type:"number","onUpdate:modelValue":s[5]||(s[5]=v=>r.value.age=v),min:"18",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition"},null,512),[[L,r.value.age]])]),e("div",null,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"Email",-1)),k(e("input",{type:"email","onUpdate:modelValue":s[6]||(s[6]=v=>r.value.email=v),placeholder:"e.g. juandelacruz@example.com",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition"},null,512),[[L,r.value.email]])]),e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"Phone",-1)),k(e("input",{"onUpdate:modelValue":s[7]||(s[7]=v=>r.value.phone=v),onInput:a,placeholder:"e.g. 09123456789",maxlength:"11",class:"peer w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition"},null,544),[[L,r.value.phone]])]),e("div",{class:"md:col-span-2 flex justify-end gap-4 pt-4"},[e("button",{type:"button",onClick:E,class:"text-gray-500 hover:text-red-500 transition"}," Cancel "),s[17]||(s[17]=e("button",{type:"submit",class:"bg-mccblue hover:bg-mccdarkblue text-white px-4 py-2 rounded-md transition"}," Save ",-1))])],32),e("button",{onClick:E,class:"absolute top-4 right-4 text-gray-500 text-2xl hover:text-red-500 transition"}," Ã— ")])])):z("",!0)]),_:1})]))]))}},ye=de(xe,[["__scopeId","data-v-05f82d00"]]),he={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},we={class:"bg-white w-full max-w-3xl p-6 rounded-xl shadow-lg relative animate-fade-in-up"},ke={class:"text-xl font-bold mb-4 text-mccblue select-none"},Ce={class:"flex justify-end mb-2"},$e={key:0,class:"flex justify-center py-4"},Se={key:1,class:"min-w-full border border-gray-300 rounded"},Ee={class:"px-4 py-2"},_e={class:"px-4 py-2"},je={class:"px-4 py-2"},Ie={class:"px-4 py-2"},Be=["onClick"],Me={key:0},Le={class:"relative"},Ae={key:0,class:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-40 overflow-y-auto"},Te=["onClick"],Fe={class:"grid grid-cols-3 gap-2"},Ve={__name:"AssignmentForm",props:{instructor:Object,course:String},setup(V,{expose:R}){var Y;const x=V,y=b(!1),C=b(!1),$=b(!1),r=b([]),S=b([]),N=["BSIT","BSBA","BSHM","BSED","BEED"],E=["North","East","West","South","Northeast","Northwest","Southeast","Southwest"],a=b({teacher_id:((Y=x.instructor)==null?void 0:Y.id)||"",subject_input:"",subject_id:"",course:"",year:"",section:""}),h=async()=>{try{const i=await I.get(`/api/allsubjects/${x.course}`);r.value=i.data}catch(i){console.error("Failed to load subjects",i)}},M=b(""),m=b([]),s=()=>{const i=M.value.toLowerCase();m.value=r.value.filter(o=>o.title.toLowerCase().includes(i))},v=i=>{a.value.subject_id=i.id,a.value.subject_input=i.title,M.value=i.title,m.value=[]},O=async()=>{var i;if((i=x.instructor)!=null&&i.id)try{const o=await I.get(`/api/instructors/${x.instructor.id}/assignments`);S.value=o.data}catch(o){console.error("Failed to load assignments",o)}finally{y.value=!1}},W=async i=>{if((await f.fire({title:"Are you sure?",text:"This will remove the assigned subject.",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes"})).isConfirmed)try{await I.delete(`/instructors/${x.instructor.id}/assignments/${i}`),f.fire({icon:"success",title:"Assignment removed.",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1}),O()}catch(l){console.error(l),f.fire("Error","Could not delete assignment","error")}},H=async()=>{C.value=!0,S.value=[],y.value=!0,await ce(),h(),O()},X=()=>{C.value=!1,$.value=!1,S.value=[],U()},F=()=>{$.value=!$.value,$.value||U()},U=()=>{a.value.subject_input="",a.value.subject_id="",a.value.course="",a.value.year="",a.value.section="",M.value="",m.value=[]};ne(()=>x.instructor,i=>{i&&i.id&&(console.log("View subjects clicked:"),console.log("instructor id:",i.id),console.log("instructor course:",x.course),H())},{immediate:!0});const q=async()=>{if(!a.value.subject_id){f.fire("Error","Please select a subject from the list.","error");return}try{await I.post(`/instructors/${x.instructor.id}/assign-subject`,{subject_id:a.value.subject_id,course:a.value.course,year:a.value.year,section:a.value.section}),f.fire({icon:"success",title:"Assignment saved",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1}),O(),U()}catch(i){console.error(i);let o="Could not save assignment";i.response&&i.response.data&&i.response.data.message&&(o=i.response.data.message),f.fire("Error",o,"error")}};return R({openModal:H}),(i,o)=>(d(),u("div",null,[Q(ae,{name:"fade"},{default:se(()=>[C.value?(d(),u("div",he,[e("div",we,[e("h2",ke,c(V.instructor.fname)+" "+c(V.instructor.lname)+" â€“ Assigned Subjects & Classes ",1),e("div",Ce,[e("button",{onClick:F,class:"bg-mccblue hover:bg-mccdarkblue text-white px-3 py-1 rounded-md transition mr-[20px] mt-[-45px] mb-4"},c($.value?"Cancel":"+ Assign Subject"),1)]),e("div",{class:ie(["min-w-full bg-white rounded mb-4 overflow-y-auto",S.value.length>5?"max-h-64":""])},[y.value?(d(),u("div",$e,o[4]||(o[4]=[e("svg",{class:"animate-spin h-8 w-8 text-mccblue",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)]))):(d(),u("table",Se,[o[6]||(o[6]=e("thead",{class:"bg-mcclightblue text-white"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Subject"),e("th",{class:"px-4 py-2"},"Class"),e("th",{class:"px-4 py-2"},"Year"),e("th",{class:"px-4 py-2"},"Actions")])],-1)),e("tbody",null,[(d(!0),u(A,null,T(S.value,l=>(d(),u("tr",{key:l.id,class:"text-center border-t border-gray-200"},[e("td",Ee,c(l.subject_name),1),e("td",_e,c(l.course)+" "+c(l.year)+"-"+c(l.section),1),e("td",je,c(l.year),1),e("td",Ie,[e("button",{onClick:Z=>W(l.id),class:"text-red-500 hover:text-red-700 text-md transition",title:"Delete assignment"}," Delete ",8,Be)])]))),128)),S.value.length===0?(d(),u("tr",Me,o[5]||(o[5]=[e("td",{colspan:"4",class:"py-4 text-gray-500 text-center"},"No assignments yet.",-1)]))):z("",!0)])]))],2),$.value?(d(),u("form",{key:0,onSubmit:re(q,["prevent"]),class:"space-y-4 mb-4"},[e("div",Le,[o[7]||(o[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"Subject",-1)),k(e("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>M.value=l),onInput:s,placeholder:"Type to search subject...",class:"w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",required:""},null,544),[[L,M.value]]),m.value.length?(d(),u("div",Ae,[(d(!0),u(A,null,T(m.value,l=>(d(),u("div",{key:l.id,onClick:Z=>v(l),class:"px-3 py-2 hover:bg-gray-200 text-gray-800 cursor-pointer"},c(l.title),9,Te))),128))])):z("",!0)]),e("div",Fe,[e("div",null,[o[9]||(o[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"Course",-1)),k(e("select",{"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.course=l),class:"w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",required:""},[o[8]||(o[8]=e("option",{value:"",disabled:""},"Select course",-1)),(d(),u(A,null,T(N,l=>e("option",{key:l},c(l),1)),64))],512),[[K,a.value.course]])]),e("div",null,[o[11]||(o[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"Year",-1)),k(e("select",{"onUpdate:modelValue":o[2]||(o[2]=l=>a.value.year=l),class:"w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",required:""},[o[10]||(o[10]=e("option",{value:"",disabled:""},"Select year",-1)),(d(),u(A,null,T([1,2,3,4],l=>e("option",{key:l},c(l),1)),64))],512),[[K,a.value.year]])]),e("div",null,[o[13]||(o[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1 select-none"},"Section",-1)),k(e("select",{"onUpdate:modelValue":o[3]||(o[3]=l=>a.value.section=l),class:"w-full rounded-md border border-gray-300 bg-white text-gray-800 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-mccblue focus:border-mccblue transition",required:""},[o[12]||(o[12]=e("option",{value:"",disabled:""},"Select section",-1)),(d(),u(A,null,T(E,l=>e("option",{key:l},c(l),1)),64))],512),[[K,a.value.section]])])]),o[14]||(o[14]=e("div",{class:"flex justify-end pt-2"},[e("button",{type:"submit",class:"bg-mccblue hover:bg-mccdarkblue text-white px-4 py-2 rounded-md transition"}," Save Assignment ")],-1))],32)):z("",!0),e("button",{onClick:X,class:"absolute top-4 right-4 text-gray-500 text-2xl hover:text-red-500 transition"}," Ã— ")])])):z("",!0)]),_:1})]))}},Ne=de(Ve,[["__scopeId","data-v-e1988bf1"]]),Ue={class:"flex flex-col md:flex-row justify-between items-center p-5"},De={class:"mb-2 md:mb-0"},Pe=["value"],ze={class:"flex"},qe={class:"p-4 space-y-6 animate-slide-in-top"},Oe={class:"overflow-x-auto rounded-lg border shadow"},Ye={class:"min-w-full bg-white"},Ge={class:"bg-mcclightblue text-white"},Ke=["onClick"],Re={key:0},We={class:"px-4 py-2 text-center"},He={class:"px-4 py-2 text-center"},Je={class:"px-4 py-2 text-center"},Qe={class:"px-4 py-2 text-center"},Xe={class:"px-4 py-2 text-center space-x-2"},Ze=["onClick"],et=["onClick"],tt=["onClick"],st={key:0},ot={class:"flex justify-between bg-mcclightblue items-center px-2 text-sm text-white select-none"},nt={class:"font-semibold"},lt={class:"font-semibold"},rt={class:"font-semibold"},at={class:"flex gap-1"},it=["disabled"],dt=["onClick"],ut=["disabled"],vt={__name:"CourseInstructors",setup(V){const x=me().props.department,y=b(""),C=b(""),$=b([]),r=b(""),S=b(null),N=b(""),E=b([{key:"lname",direction:"asc"}]),a=b(10),h=b(1),M=[{key:"id",label:"ID"},{key:"fname",label:"First Name"},{key:"lname",label:"Last Name"},{key:"sex",label:"Gender"}],m=p=>{s.value=!0,v.value={...p}},s=b(!1),v=b(null),O=()=>{s.value=!1,v.value=null},W=b(null),H=p=>{W.value=p,S.value.openModal()},X=async()=>{try{const p=await I.get("/session");y.value=p.data.fullname,C.value=p.data.level,r.value=p.data.username,(!y.value||!C.value)&&(window.location.href="/")}catch{window.location.href="/"}},F=async()=>{try{const p=await I.get(`/api/instructors/${x}`);$.value=p.data,h.value=1}catch(p){console.error("Error fetching instructors:",p)}},U=ee(()=>[...$.value].sort((n,t)=>{for(const g of E.value){const j=g.key,B=g.direction;if(n[j]<t[j])return B==="asc"?-1:1;if(n[j]>t[j])return B==="asc"?1:-1}return 0}).filter(n=>Object.values(n).join(" ").toLowerCase().includes(N.value.toLowerCase()))),q=ee(()=>{const p=(h.value-1)*a.value;return U.value.slice(p,p+a.value)}),Y=ee(()=>Math.ceil(U.value.length/a.value)),i=()=>{h.value=1},o=p=>{const n=E.value.findIndex(t=>t.key===p);n!==-1?E.value[n].direction=E.value[n].direction==="asc"?"desc":"asc":E.value.push({key:p,direction:"asc"})},l=async p=>{if((await f.fire({title:"Remove instructor?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes"})).isConfirmed)try{await I.delete(`/instructors/${p}`),await F(),f.fire({icon:"success",title:"Deleted",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1})}catch{f.fire("Error","Failed to delete instructor","error")}},Z=()=>{const p="/imports/instructor-loads";let n=null;f.fire({title:"Import Instructor Loads",html:`
      <div id="dz"
           class="mt-2 border-2 border-dashed rounded-lg p-6 text-sm
                  bg-white hover:bg-gray-50 transition-colors
                  border-gray-300 text-gray-600">
        <div class="pointer-events-none select-none">
          <div class="font-semibold text-gray-800 mb-1 text-lg">Drag & drop file here</div>
          <div class="text-md opacity-80 mb-3">Accepted: .xlsx, .xls, .csv</div>
        </div>
        <div class="items-center gap-2">
          <button id="browseBtn"
                  class="px-4 py-2 rounded bg-mccblue text-white text-md hover:opacity-90">
            Browse
          </button>
          <span id="fileName" class="text-xs"></span>
        </div>
        <input id="fileInput" type="file" accept=".xlsx,.xls,.csv" class="hidden" />

        <div id="progressWrap" class="mt-4 hidden">
          <div class="h-2 w-full bg-gray-200 rounded">
            <div id="bar" class="h-2 bg-mccblue rounded" style="width:0%"></div>
          </div>
          <div id="pct" class="text-xs mt-1 text-gray-600">0%</div>
        </div>
      </div>
    `,showCancelButton:!0,confirmButtonText:"Upload",confirmButtonColor:"#16a34a",width:600,focusConfirm:!1,allowOutsideClick:()=>!f.isLoading(),didOpen:()=>{const t=document.getElementById("dz"),g=document.getElementById("fileInput"),j=document.getElementById("browseBtn"),B=document.getElementById("fileName"),D=["xlsx","xls","csv"],_=w=>{if(!w)return;const P=(w.name.split(".").pop()||"").toLowerCase();if(!D.includes(P)){n=null,B.textContent="",f.showValidationMessage("Invalid file type. Please upload a .xlsx or .csv file.");return}n=w,B.textContent=`${w.name} (${Math.round(w.size/1024)} KB)`,f.resetValidationMessage()};j.addEventListener("click",()=>g.click()),g.addEventListener("change",w=>{var P;return _((P=w.target.files)==null?void 0:P[0])});const J=w=>{w.preventDefault(),w.stopPropagation()};["dragenter","dragover","dragleave","drop"].forEach(w=>t.addEventListener(w,J)),t.addEventListener("dragenter",()=>t.classList.add("bg-gray-50")),t.addEventListener("dragleave",()=>t.classList.remove("bg-gray-50")),t.addEventListener("drop",w=>{var P,oe;t.classList.remove("bg-gray-50"),_((oe=(P=w.dataTransfer)==null?void 0:P.files)==null?void 0:oe[0])})},preConfirm:async()=>{var g,j,B,D;if(!n)return f.showValidationMessage("Please select a file first."),!1;const t=new FormData;t.append("file",n);try{return(await I.post(p,t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:J=>{}})).data}catch(_){const J=((j=(g=_==null?void 0:_.response)==null?void 0:g.data)==null?void 0:j.error)||((D=(B=_==null?void 0:_.response)==null?void 0:B.data)==null?void 0:D.message)||_.message;return f.showValidationMessage(J),!1}}}).then(async t=>{if(t.isConfirmed&&t.value){const{inserted:g=0,updated:j=0,skipped:B=0,errors:D=[]}=t.value;await f.fire({icon:"success",title:"Import completed",html:`<div class="text-left">
                 <div><b>Inserted:</b> ${g}</div>
                 <div><b>Updated:</b> ${j}</div>
                 <div><b>Skipped:</b> ${B}</div>
                 ${D.length?`<hr class="my-2"/><div class="text-sm max-h-40 overflow-auto">${D.map(_=>`<div>â€¢ ${_}</div>`).join("")}</div>`:""}
               </div>`}),await(F==null?void 0:F())||await(fetchAssignments==null?void 0:fetchAssignments())||await(fetchData==null?void 0:fetchData())}})};return pe(()=>{X(),F()}),(p,n)=>(d(),le(be,{fullname:y.value,userLevel:C.value,title:`Instructors â€“ ${te(x)}`},{default:se(()=>[e("div",Ue,[e("div",De,[n[5]||(n[5]=e("label",{class:"mr-2"},"Show",-1)),k(e("select",{"onUpdate:modelValue":n[0]||(n[0]=t=>a.value=t),onChange:i,class:"border py-1 rounded"},[(d(),u(A,null,T([10,25,50,100],t=>e("option",{key:t,value:t},c(t),9,Pe)),64))],544),[[K,a.value]]),n[6]||(n[6]=e("span",{class:"ml-2"},"entries",-1))]),k(e("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>N.value=t),onInput:i,type:"text",placeholder:"Search instructors...",class:"border px-3 py-1 rounded w-full md:w-64 ml-[62px]"},null,544),[[L,N.value]]),e("div",ze,[e("button",{onClick:Z,class:"bg-mccblue text-white px-4 py-2 rounded-lg hover:bg-mccdarkblue transition"}," Import "),Q(ye,{course:te(x),class:"ml-4",editMode:s.value,instructorToEdit:v.value,onSubmitted:F,onCancelEdit:O},null,8,["course","editMode","instructorToEdit"])])]),Q(Ne,{course:te(x),ref_key:"assignmentForm",ref:S,instructor:W.value},null,8,["course","instructor"]),e("div",qe,[e("div",Oe,[e("table",Ye,[e("thead",Ge,[e("tr",null,[(d(),u(A,null,T(M,t=>e("th",{key:t.key,class:"px-4 py-2 text-center cursor-pointer select-none",onClick:g=>o(t.key)},[G(c(t.label)+" ",1),E.value.find(g=>g.key===t.key)?(d(),u("span",Re,c(E.value.find(g=>g.key===t.key).direction==="asc"?"â–²":"â–¼"),1)):z("",!0)],8,Ke)),64)),n[7]||(n[7]=e("th",{class:"px-4 py-2 text-center"},"Actions",-1))])]),e("tbody",null,[(d(!0),u(A,null,T(q.value,t=>(d(),u("tr",{key:t.id,class:"hover:bg-gray-100"},[e("td",We,c(t.teachid),1),e("td",He,c(t.fname),1),e("td",Je,c(t.lname),1),e("td",Qe,c(t.sex),1),e("td",Xe,[e("button",{onClick:g=>H(t),class:"text-green-600 hover:underline select-none"},"View Subjects",8,Ze),e("button",{onClick:g=>m(t),class:"text-blue-600 hover:underline select-none"},"Edit",8,et),e("button",{onClick:g=>l(t.id),class:"text-red-600 hover:underline select-none"},"Delete",8,tt)])]))),128)),q.value.length===0?(d(),u("tr",st,n[8]||(n[8]=[e("td",{colspan:"5",class:"text-center py-4"},"No instructors found.",-1)]))):z("",!0)])]),e("div",ot,[e("div",null,[n[9]||(n[9]=G(" Showing ")),e("span",nt,c(q.value.length?(h.value-1)*a.value+1:0),1),n[10]||(n[10]=G(" to ")),e("span",lt,c((h.value-1)*a.value+q.value.length),1),n[11]||(n[11]=G(" of ")),e("span",rt,c(U.value.length),1),n[12]||(n[12]=G(" entries "))]),e("div",at,[e("button",{onClick:n[2]||(n[2]=t=>E.value=[]),class:"text-sm hover:bg-mccblue px-2 py-1 rounded transition"}," Clear Sorting "),e("button",{onClick:n[3]||(n[3]=t=>h.value--),disabled:h.value===1,class:"px-3 py-1 rounded disabled:opacity-50 disabled:hover:bg-mcclightblue hover:bg-mccblue"}," Prev ",8,it),(d(!0),u(A,null,T(Y.value,t=>(d(),u("button",{key:t,onClick:g=>h.value=t,class:ie(["px-3 py-1 rounded",h.value===t?"bg-white text-mccblue font-bold":"hover:bg-mccblue transition"])},c(t),11,dt))),128)),e("button",{onClick:n[4]||(n[4]=t=>h.value++),disabled:h.value===Y.value,class:"px-3 py-1 rounded disabled:opacity-50 disabled:hover:bg-mcclightblue hover:bg-mccblue transition"}," Next ",8,ut)])])])])]),_:1},8,["fullname","userLevel","title"]))}};export{vt as default};
