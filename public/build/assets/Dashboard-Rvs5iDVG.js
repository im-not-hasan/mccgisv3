import{N as G,O as W,P as q,Q as H,R as E,U,V as Q,X,g as a,d as o,k as $,e,j as y,t as l,l as w,W as S,u as I,G as Y,r as u,o as D,c as N,f as z,v as J,F as B,h as M,i as K,n as Z,a as R,b as T,w as ee}from"./app-BgyXi-Fv.js";import{_ as te}from"./DashboardLayout-Cc1Y4xz-.js";import{i as se,_ as k}from"./CardSpotlight.vue_vue_type_script_setup_true_lang-1WxLn8lC.js";import"./sweetalert2.esm.all-BQIkj5Wb.js";const oe={key:0,class:"bg-mccblue text-white px-4 py-2 rounded mb-4 shadow"},le={class:"font-bold"},ae={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6 mb-6"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie={class:"bg-white rounded shadow p-6 mb-6 md:mb-0"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 items-center"},re={class:"flex flex-col justify-center order-1 md:order-none md:mt-[-20px]"},de={class:"text-xl font-bold"},ue={class:"text-xl font-bold"},me={class:"flex flex-col items-center order-2 md:order-none"},ve={class:"bg-white rounded shadow p-6"},ge={components:{"v-chart":G}},be=Object.assign(ge,{__name:"AdminDashboard",props:{counts:Object,grading:Object,activeSemesters:Array,complianceRate:Number,studentsChartOptions:Object},setup(i){W([se,q,H,E,U,Q,X]);const b={series:[{type:"gauge",startAngle:90,endAngle:-270,radius:"100%",progress:{show:!0,overlap:!1,roundCap:!0,clip:!1,itemStyle:{color:"#22c55e"}},axisLine:{lineStyle:{width:18,color:[[1,"#e5e7eb"]]}},pointer:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},data:[{value:100}],detail:{valueAnimation:!0,formatter:"{value}%",fontSize:24,fontWeight:"bold",color:"#0f172a",offsetCenter:[0,0]}}]},_=()=>S.visit("/subjects"),g=()=>S.visit("/classes"),h=()=>S.visit("/instructors"),x=()=>S.visit("/students"),m=()=>S.visit("/grades/incomplete");return(c,n)=>(o(),a("div",null,[i.activeSemesters.length?(o(),a("div",oe,[n[0]||(n[0]=y(" Active Semesters: ")),e("span",le,l(i.activeSemesters.map(p=>p==="1"?"First Semester":p==="2"?"Second Semester":"Summer").join(", ")),1)])):$("",!0),e("div",ae,[w(k,{label:"Students",count:i.counts.students||0,iconName:"students",useSvg:!0,onClick:x,class:"cursor-pointer"},null,8,["count"]),w(k,{label:"Teachers",count:i.counts.teachers||0,iconName:"teachers",useSvg:!0,onClick:h,class:"cursor-pointer"},null,8,["count"]),w(k,{label:"Classes",count:i.counts.class||0,iconName:"grades",useSvg:!0,onClick:g,class:"cursor-pointer"},null,8,["count"]),w(k,{label:"Subjects",count:i.counts.subjects||0,iconName:"subjects",useSvg:!0,onClick:_,class:"cursor-pointer"},null,8,["count"])]),e("div",ne,[e("div",ie,[n[3]||(n[3]=e("h2",{class:"text-lg font-semibold mb-4"},"Grading Compliance",-1)),e("div",ce,[e("div",re,[n[1]||(n[1]=e("p",{class:"text-gray-500"},"Classes with Complete Grades:",-1)),e("p",de,l(i.grading.complete||0),1),n[2]||(n[2]=e("p",{class:"text-gray-500 mt-4"},"Classes Missing Grades:",-1)),e("p",ue,l(i.grading.incomplete||0),1)]),e("div",me,[w(I(G),{option:b,class:"mx-auto h-48 md:w-48"}),e("button",{onClick:m,class:"mt-4 bg-mccblue text-white px-4 py-2 rounded hover:bg-mccdarkblue transition w-full"}," View Incomplete Grades ")])])]),e("div",ve,[n[4]||(n[4]=e("h2",{class:"text-lg font-semibold mb-4"},"Students per Course",-1)),w(I(G),{option:i.studentsChartOptions,class:"h-64"},null,8,["option"])])])]))}}),pe={key:0,class:"bg-mccblue text-white px-4 py-2 rounded mb-4 shadow"},he={class:"font-bold"},xe={key:1,class:"flex justify-center py-10"},ye={key:2},fe={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6 mb-6"},we={class:"bg-white rounded shadow p-6 mb-6"},Se={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},_e={class:"text-xl font-bold"},ke={class:"text-xl font-bold"},Ce={class:"text-xl font-bold"},$e={class:"w-full bg-gray-300 rounded-full h-3 overflow-hidden"},je={__name:"TeacherDashboard",props:{counts:Object,grading:Object,activeSemesters:Array,complianceRate:[String,Number],loading:{type:Boolean,default:!1}},setup(i){const b=()=>S.visit("/classes"),_=()=>S.visit("/subjects"),g=()=>S.visit("/consultation"),h=()=>S.visit("/settings"),x=()=>S.visit("/subjects");return(m,c)=>(o(),a("div",null,[i.activeSemesters.length?(o(),a("div",pe,[c[0]||(c[0]=y(" Active Semesters: ")),e("span",he,l(i.activeSemesters.map(n=>n==="1"?"First Semester":n==="2"?"Second Semester":"Summer").join(", ")),1)])):$("",!0),i.loading?(o(),a("div",xe,c[1]||(c[1]=[e("svg",{class:"animate-spin h-8 w-8 text-mccblue",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1)]))):(o(),a("div",ye,[e("div",fe,[w(k,{label:"My Subjects",count:i.counts.subjects||0,iconName:"subjects",useSvg:!0,onClick:_,class:"cursor-pointer"},null,8,["count"]),w(k,{label:"My Classes",count:i.counts.class||0,iconName:"grades",useSvg:!0,onClick:b,class:"cursor-pointer"},null,8,["count"]),w(k,{label:"Consultations",count:"-",iconName:"grades",useSvg:!0,onClick:g,class:"cursor-pointer"}),w(k,{label:"My Performance",count:"-",iconName:"grades",useSvg:!0,onClick:h,class:"cursor-pointer"})]),e("div",we,[c[5]||(c[5]=e("h2",{class:"text-lg font-semibold mb-4"},"Grading Compliance",-1)),e("div",Se,[e("div",null,[c[2]||(c[2]=e("p",{class:"text-gray-500"},"Classes with Complete Grades",-1)),e("p",_e,l(i.grading.complete||0),1)]),e("div",null,[c[3]||(c[3]=e("p",{class:"text-gray-500"},"Classes Missing Grades",-1)),e("p",ke,l(i.grading.incomplete||0),1)]),e("div",null,[c[4]||(c[4]=e("p",{class:"text-gray-500"},"% Fully Graded",-1)),e("p",Ce,l(i.complianceRate)+"%",1)])]),e("div",$e,[e("div",{class:"bg-mccblue h-3",style:Y({width:i.complianceRate+"%"})},null,4)]),e("button",{onClick:x,class:"mt-4 bg-mccblue text-white px-4 py-2 rounded hover:bg-mccdarkblue transition"}," View Incomplete Grades ")])]))]))}},Ne={key:0,class:"text-center py-10"},Oe={key:1},Te={key:0,class:"bg-white rounded shadow p-4 mb-4"},Re={class:"text-2xl font-bold text-mccblue"},Ae={class:"text-gray-700"},Be={class:"font-medium"},Me={class:"p-1 mb-4"},De={class:"mb-4"},Ge={class:"text-gray-600 mt-1"},Le={key:0},Pe={class:"flex flex-col md:flex-row justify-between items-center mb-4"},Fe={class:"mb-2 md:mb-0"},Ie=["value"],ze={key:0,class:"flex justify-center py-10"},Ve={key:1},We={class:"min-w-full bg-white shadow rounded-lg overflow-hidden"},qe={class:"bg-mcclightblue text-white"},He=["onClick"],Ee={key:0},Ue={class:"py-2 px-4 font-medium text-center"},Qe={class:"py-2 px-4 text-center"},Xe={class:"py-2 px-4 text-center"},Ye={class:"py-2 px-4 text-center"},Je={key:0},Ke={class:"flex justify-between bg-mcclightblue items-center px-2 text-sm text-white select-none rounded-b-lg"},Ze={class:"font-semibold"},et={class:"font-semibold"},tt={class:"font-semibold"},st={class:"flex gap-1"},ot=["disabled"],lt=["onClick"],at=["disabled"],nt={__name:"StudentDashboard",setup(i){const b=u(null),_=u([]),g=u([]),h=u(!0),x=u(""),m=u([{key:"title",direction:"asc"}]),c=async()=>{try{const v=await R.get("/student/dashboard");console.log("Student dashboard response:",v),v.data.student||console.error("No student data received:",v.data),b.value=v.data.student,_.value=v.data.activeSemesters}catch(v){console.error("Failed to load student dashboard data:",v)}finally{h.value=!1}};D(()=>{c()});const n=u(10),p=u(1),j=[{key:"code",label:"Subject Code"},{key:"title",label:"Subject Title"},{key:"instructor",label:"Instructor"},{key:"grade",label:"Grade"}],f=async()=>{try{const v=await R.get("/student-subjects");g.value=v.data.subjects}catch(v){console.error("Failed to load student subjects:",v)}finally{h.value=!1}},d=N(()=>[...g.value].sort((t,s)=>{for(const C of m.value){const A=C.key,F=C.direction;if(t[A]<s[A])return F==="asc"?-1:1;if(t[A]>s[A])return F==="asc"?1:-1}return 0}).filter(t=>Object.values(t).join(" ").toLowerCase().includes(x.value.toLowerCase()))),r=N(()=>{const v=(p.value-1)*n.value;return d.value.slice(v,v+n.value)}),O=N(()=>Math.ceil(d.value.length/n.value)),L=()=>{p.value=1},V=v=>{const t=m.value.findIndex(s=>s.key===v);t!==-1?m.value[t].direction=m.value[t].direction==="asc"?"desc":"asc":m.value.push({key:v,direction:"asc"})},P=N(()=>new Set(g.value.map(t=>t.code)).size);return D(()=>{f()}),(v,t)=>(o(),a("div",null,[h.value?(o(),a("div",Ne,t[5]||(t[5]=[e("svg",{class:"animate-spin h-8 w-8 text-mccblue mx-auto",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1)]))):(o(),a("div",Oe,[b.value?(o(),a("div",Te,[e("h1",Re,"Welcome, "+l(b.value.fullname),1),e("p",Ae,[t[6]||(t[6]=y(" ID: ")),e("span",Be,l(b.value.id),1),y(" | "+l(b.value.course)+" "+l(b.value.year)+"-"+l(b.value.section),1)])])):$("",!0),e("div",Me,[e("div",De,[e("p",Ge,[y(" You are enrolled in "+l(P.value)+" unique subject",1),P.value!==1?(o(),a("span",Le,"s")):$("",!0),t[7]||(t[7]=y(" this semester. "))])]),e("div",Pe,[e("div",Fe,[t[8]||(t[8]=e("label",{class:"mr-2"},"Show",-1)),z(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),onChange:L,class:"border py-1 rounded"},[(o(),a(B,null,M([10,25,50,100],s=>e("option",{key:s,value:s},l(s),9,Ie)),64))],544),[[J,n.value]]),t[9]||(t[9]=e("span",{class:"ml-2"},"entries",-1))]),z(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),onInput:L,type:"text",placeholder:"Search subjects...",class:"border px-3 py-1 rounded w-full md:w-64"},null,544),[[K,x.value]])]),h.value?(o(),a("div",ze,t[10]||(t[10]=[e("svg",{class:"animate-spin h-8 w-8 text-mccblue",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1)]))):(o(),a("div",Ve,[e("table",We,[e("thead",qe,[e("tr",null,[(o(),a(B,null,M(j,s=>e("th",{key:s.key,class:"py-2 px-4 text-center cursor-pointer select-none",onClick:C=>V(s.key)},[y(l(s.label)+" ",1),m.value.find(C=>C.key===s.key)?(o(),a("span",Ee,l(m.value.find(C=>C.key===s.key).direction==="asc"?"▲":"▼"),1)):$("",!0)],8,He)),64))])]),e("tbody",null,[(o(!0),a(B,null,M(r.value,s=>(o(),a("tr",{key:s.code,class:"hover:bg-gray-100"},[e("td",Ue,l(s.code),1),e("td",Qe,l(s.title),1),e("td",Xe,l(s.instructor),1),e("td",Ye,l(s.grade?Number(s.grade).toFixed(1):"-"),1)]))),128)),r.value.length===0?(o(),a("tr",Je,t[11]||(t[11]=[e("td",{colspan:"4",class:"text-center py-4"},"No subjects found.",-1)]))):$("",!0)])]),e("div",Ke,[e("div",null,[t[12]||(t[12]=y(" Showing ")),e("span",Ze,l(r.value.length?(p.value-1)*n.value+1:0),1),t[13]||(t[13]=y(" to ")),e("span",et,l((p.value-1)*n.value+r.value.length),1),t[14]||(t[14]=y(" of ")),e("span",tt,l(d.value.length),1),t[15]||(t[15]=y(" entries "))]),e("div",st,[e("button",{onClick:t[2]||(t[2]=s=>m.value=[]),class:"text-sm hover:bg-mccblue px-2 py-1 rounded transition"}," Clear Sorting "),e("button",{onClick:t[3]||(t[3]=s=>p.value--),disabled:p.value===1,class:"px-3 py-1 rounded disabled:opacity-50 disabled:hover:bg-mcclightblue hover:bg-mccblue"}," Prev ",8,ot),(o(!0),a(B,null,M(O.value,s=>(o(),a("button",{key:s,onClick:C=>p.value=s,class:Z(["px-3 py-1 rounded",p.value===s?"bg-white text-mccblue font-bold":"hover:bg-mccblue transition"])},l(s),11,lt))),128)),e("button",{onClick:t[4]||(t[4]=s=>p.value++),disabled:p.value===O.value,class:"px-3 py-1 rounded disabled:opacity-50 disabled:hover:bg-mcclightblue hover:bg-mccblue transition"}," Next ",8,at)])])]))]),t[16]||(t[16]=e("div",{class:"bg-white rounded shadow p-6"},[e("h2",{class:"text-lg font-semibold mb-4"},"Announcements"),e("p",{class:"text-gray-600"},"No announcements at the moment.")],-1))]))]))}},it={key:0,class:"text-center py-10"},ct={key:1},rt={class:"bg-white rounded shadow p-4 mb-4"},dt={class:"text-2xl font-bold text-mccblue"},ut={class:"text-gray-700"},mt={class:"font-medium"},vt={key:0,class:"bg-mccblue text-white px-4 py-2 rounded mb-4 shadow"},gt={class:"font-bold"},bt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6"},pt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},ht={class:"bg-white rounded shadow p-4 text-center"},xt={class:"text-2xl font-bold text-mccblue"},yt={class:"bg-white rounded shadow p-4 text-center"},ft={class:"text-2xl font-bold text-orange-500"},wt={class:"bg-white rounded shadow p-4 text-center"},St={class:"text-2xl font-bold text-green-500"},_t={class:"bg-white rounded shadow p-4 text-center"},kt={class:"text-2xl font-bold text-mccblue"},Ct={__name:"RegistrarDashboard",props:{counts:Object,grading:Object,activeSemesters:Array,complianceRate:Number,studentsChartOptions:Object,fullname:Object,username:Object},setup(i){const b=u(""),_=u(""),g=u({total:0}),h=u([]),x=u([]),m=u(0),c=u(!0),n=async()=>{try{const f=await R.get("/registrar/dashboard");b.value=f.data.registrar.name,_.value=f.data.registrar.id,g.value=f.data.studentCounts,h.value=f.data.activeSemesters,x.value=f.data.pendingRequests,m.value=f.data.complianceRate}catch(f){console.error("Failed to load registrar dashboard:",f)}finally{c.value=!1}};D(()=>{n()});const p=()=>S.visit("/classes"),j=()=>S.visit("/students");return(f,d)=>(o(),a("div",null,[c.value?(o(),a("div",it,d[0]||(d[0]=[e("svg",{class:"animate-spin h-8 w-8 text-mccblue mx-auto",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1)]))):(o(),a("div",ct,[e("div",rt,[e("h1",dt,"Welcome, "+l(i.fullname),1),e("p",ut,[d[1]||(d[1]=y(" ID: ")),e("span",mt,l(i.username),1),d[2]||(d[2]=y(" | Registrar Portal "))])]),h.value.length?(o(),a("div",vt,[d[3]||(d[3]=y(" Active Semesters: ")),e("span",gt,l(h.value.map(r=>r==="1"?"First Semester":r==="2"?"Second Semester":"Summer").join(", ")),1)])):$("",!0),e("div",bt,[w(k,{label:"Classes",count:i.counts.class||0,iconName:"grades",useSvg:!0,onClick:p,class:"cursor-pointer"},null,8,["count"]),w(k,{label:"Students",count:i.counts.students||0,iconName:"students",useSvg:!0,onClick:j,class:"cursor-pointer"},null,8,["count"])]),d[8]||(d[8]=e("div",{class:"bg-white rounded shadow p-6 mb-6"},[e("h2",{class:"text-lg font-semibold mb-4"},"Announcements"),e("p",{class:"text-gray-600"},"No announcements at the moment.")],-1)),e("div",pt,[e("div",ht,[d[4]||(d[4]=e("p",{class:"text-gray-500"},"Total Students",-1)),e("p",xt,l(g.value.total),1)]),e("div",yt,[d[5]||(d[5]=e("p",{class:"text-gray-500"},"Pending Requests",-1)),e("p",ft,l(x.value.length),1)]),e("div",wt,[d[6]||(d[6]=e("p",{class:"text-gray-500"},"Compliance Rate",-1)),e("p",St,l(m.value)+"%",1)]),e("div",_t,[d[7]||(d[7]=e("p",{class:"text-gray-500"},"Active Semesters",-1)),e("p",kt,l(h.value.length),1)])])]))]))}},$t={key:0,class:"flex justify-center py-10"},jt={key:1},Nt={key:4,class:"text-center text-red-500"},Bt={__name:"Dashboard",setup(i){const b=u(""),_=u(""),g=u(""),h=u(!0),x=u({students:0,teachers:0,class:0,subjects:0}),m=u([]),c=u({complete:0,incomplete:0}),n=u([{course:"BSIT",students:0},{course:"BSBA",students:0},{course:"BSED",students:0}]),p=N(()=>{const r=(c.value.complete||0)+(c.value.incomplete||0);return r===0?0:(c.value.complete/r*100).toFixed(1)}),j=N(()=>({tooltip:{trigger:"axis"},xAxis:{type:"category",data:n.value.map(r=>r.course),axisLabel:{fontWeight:"bold",color:"#374151"}},yAxis:{type:"value",axisLabel:{color:"#6B7280"}},series:[{type:"bar",barWidth:"50%",data:n.value.map(r=>r.students||0),itemStyle:{color:"#0ea5e9"}}],grid:{left:"5%",right:"5%",bottom:"10%",top:"10%",containLabel:!0}})),f=async()=>{try{const r=await R.get("/session");b.value=r.data.fullname,g.value=r.data.level,_.value=r.data.username,(!b.value||!g.value)&&(window.location.href="/")}catch{window.location.href="/"}},d=async()=>{try{const r=await R.get("/dashboard-counts");x.value=r.data.counts||{},m.value=r.data.activeSemesters||[],c.value=r.data.grading||{complete:0,incomplete:0},n.value=r.data.studentsPerCourse||[]}catch(r){console.error("Error:",r)}finally{h.value=!1}};return D(()=>{f(),d()}),(r,O)=>(o(),T(te,{fullname:b.value,userLevel:g.value,title:"Dashboard",class:"animate-slide-in-top"},{default:ee(()=>[h.value?(o(),a("div",$t,O[0]||(O[0]=[e("svg",{class:"animate-spin h-8 w-8 text-mccblue",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1)]))):(o(),a("div",jt,[g.value==="admin"?(o(),T(be,{key:0,counts:x.value,grading:c.value,activeSemesters:m.value,complianceRate:p.value,studentsChartOptions:j.value},null,8,["counts","grading","activeSemesters","complianceRate","studentsChartOptions"])):g.value==="teacher"?(o(),T(je,{key:1,counts:x.value,grading:c.value,activeSemesters:m.value},null,8,["counts","grading","activeSemesters"])):g.value==="student"?(o(),T(nt,{key:2,counts:x.value,activeSemesters:m.value},null,8,["counts","activeSemesters"])):g.value==="registrar"?(o(),T(Ct,{key:3,counts:x.value,grading:c.value,activeSemesters:m.value,complianceRate:p.value,studentsChartOptions:j.value,username:_.value,fullname:b.value},null,8,["counts","grading","activeSemesters","complianceRate","studentsChartOptions","username","fullname"])):(o(),a("div",Nt," Unknown user level: "+l(g.value),1))]))]),_:1},8,["fullname","userLevel"]))}};export{Bt as default};
