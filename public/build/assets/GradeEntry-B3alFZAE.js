import{r as c,c as $,M as ze,K as ke,o as Ee,g as a,d,e as t,t as n,u as H,k as K,j as Y,F as x,h as v,f as p,i as b,n as W,a as Z}from"./app-BgyXi-Fv.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ae={class:"p-6 bg-whitebg"},qe={class:"grid grid-cols-3 gap-6 mb-6"},Ce={class:"bg-blue-100 text-mcclightblue rounded-md p-4 shadow-md flex flex-col justify-between"},Ne={class:"text-xl text-mccblue font-bold"},Ue={class:"bg-blue-100 text-mcclightblue rounded-md p-4 shadow-md flex flex-col justify-between"},Fe={class:"text-xl text-mccblue font-bold"},Ve={class:"text-md font-bold"},Se={class:"bg-blue-100 text-mcclightblue rounded-md p-4 shadow-md flex flex-col justify-between"},Re={class:"text-xl text-mccblue font-bold"},Ie={class:"text-md font-bold"},Me={key:0,class:"min-w-full border-collapse text-xs"},Te=["colspan"],he=["disabled"],Le=["colspan"],Qe=["disabled"],De=["onUpdate:modelValue"],Ge={class:"border p-1 bg-gray-300 text-center font-semibold sticky top-8 z-30"},Oe=["onUpdate:modelValue"],Pe={class:"border p-1 bg-gray-300 text-center font-semibold sticky top-8 z-30"},$e={class:"border p-1 bg-blue-200 text-center sticky top-8 z-30"},He={class:"border p-1 bg-blue-200 text-center sticky top-8 z-30"},Ke={class:"border p-1 bg-blue-200 text-center sticky top-8 z-30"},Ye={class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},Ze={key:0},Be=["colspan"],Xe={class:"border-none p-1 text-center bg-white"},je={class:"border-none p-1 sticky left-0 bg-white z-40 w-36"},Je={class:"border-none p-1 sticky left-20 bg-white z-40 w-3"},We={class:"border-none p-1 sticky left-40 bg-white z-40 w-36"},_e=["onUpdate:modelValue","max"],et={class:"border p-1 text-center font-semibold bg-gray-200"},tt={class:"border p-1 text-center font-semibold bg-gray-200"},rt={class:"border p-1 text-center font-semibold bg-gray-200"},ot=["onUpdate:modelValue"],st={class:"border p-1 text-center font-semibold bg-gray-200"},nt={class:"border p-1 text-center font-semibold bg-gray-200"},lt={class:"border p-1 text-center font-semibold bg-gray-200"},at={class:"border p-1 text-center bg-blue-100"},dt=["onUpdate:modelValue","max"],it={class:"border p-1 text-center font-semibold bg-gray-200"},ut={class:"border p-1 text-center font-semibold bg-gray-200"},pt={class:"border p-1 text-center bg-blue-100"},bt=["onUpdate:modelValue","max"],ct={class:"border p-1 text-center bg-blue-100"},mt=["onUpdate:modelValue","max"],gt={class:"border p-1 text-center font-semibold bg-gray-200"},yt={class:"border p-1 text-center font-semibold bg-gray-200"},xt={class:"border p-1 text-center font-semibold bg-gray-200"},vt={class:"border p-1 text-center font-semibold bg-gray-200"},ft={class:"border p-1 text-center font-semibold bg-gray-200"},zt={key:1,class:"min-w-full border-collapse text-xs"},kt=["colspan"],Et=["disabled"],wt=["colspan"],At=["disabled"],qt=["onUpdate:modelValue"],Ct={class:"border p-1 bg-gray-300 text-center font-semibold sticky top-8 z-30"},Nt=["onUpdate:modelValue"],Ut={class:"border p-1 bg-gray-300 text-center font-semibold sticky top-8 z-30"},Ft={class:"border p-1 bg-blue-200 text-center sticky top-8 z-30"},Vt={class:"border p-1 bg-blue-200 text-center sticky top-8 z-30"},St={key:0},Rt=["colspan"],It={class:"border-none p-1 text-center bg-white"},Mt={class:"border-none p-1 sticky left-0 bg-white z-40 w-36"},Tt={class:"border-none p-1 sticky left-20 bg-white z-40 w-36"},ht={class:"border-none p-1 sticky left-40 bg-white z-40 w-36"},Lt=["onUpdate:modelValue","max"],Qt=["onUpdate:modelValue"],Dt={class:"border p-1 text-center bg-blue-100"},Gt=["onUpdate:modelValue","max"],Ot={class:"border p-1 text-center bg-blue-100"},Pt=["onUpdate:modelValue","max"],$t={class:"mt-4 text-right"},Ht=["disabled"],Kt={class:"absolute bottom-2 left-2 flex space-x-2"},Yt={__name:"GradeEntry",setup(Zt){const A=c("midterm"),_=$(()=>4+(m.value+3)+(g.value+3)+3+5+3),{url:ie}=ze(),M=new URLSearchParams(ie.split("?")[1]),T=M.get("subject")||"",h=M.get("course")||"",L=M.get("year")||"",Q=M.get("section")||"",F=c(!0),m=c(5),g=c(10),y=c(Array(m.value).fill(0)),f=c(Array(g.value).fill(0)),k=c(100),N=c(100),U=c(100),E=c([]),D=$(()=>y.value.reduce((r,e)=>r+(Number(e)||0),0)),G=$(()=>f.value.reduce((r,e)=>r+(Number(e)||0),0)),B=$(()=>(Number(N.value)||0)+(Number(U.value)||0)),ee=()=>{m.value++,y.value.push(0),E.value.forEach(r=>{r.quizzes.push("")})},te=()=>{g.value++,f.value.push(0),E.value.forEach(r=>{r.attendance.push("")})},re=()=>{m.value>1&&(m.value--,y.value.pop(),E.value.forEach(r=>{r.quizzes.pop()}))},oe=()=>{g.value>1&&(g.value--,f.value.pop(),E.value.forEach(r=>{r.attendance.pop()}))};function X(r){for(const e in r)if(Array.isArray(r[e]))r[e]=r[e].map(o=>{if(o===""||o===null)return o;const l=Number(o);return Number.isInteger(l)?parseInt(l):l});else if(typeof r[e]=="object"&&r[e]!==null)X(r[e]);else if(r[e]!==""&&r[e]!==null){const o=Number(r[e]);isNaN(o)||(r[e]=Number.isInteger(o)?parseInt(o):o)}}const ue=async()=>{var r,e,o,l,s,i,u,V;try{const C=await Z.get("/session?source=gradeentry");if(se.value=C.data.fullname,J.value=C.data.level,O.value=C.data.username,!se.value||!J.value||J.value!=="teacher"){window.location.href="/";return}}catch{window.location.href="/";return}try{F.value=!0;const C=`/grades/${encodeURIComponent(T)}/${encodeURIComponent(h)}/${encodeURIComponent(L)}/${encodeURIComponent(Q)}`;console.log(`Fetching grades from: ${C}?teacher_username=${O.value}&ay_id=${q.value.id}`);const z=(await Z.get(C,{params:{teacher_username:O.value,ay_id:q.value.id}})).data;X(z.gradesData),X(z.gradeComponents),m.value=z.quizCount??5,g.value=z.attendanceCount??10;const ge=((r=z.gradeComponents)==null?void 0:r.quiz)||{};y.value=Array(m.value).fill(0).map((S,w)=>ge[w+1]??0);const ye=((e=z.gradeComponents)==null?void 0:e.attendance)||{};f.value=Array(g.value).fill(0).map((S,w)=>ye[w+1]??0),k.value=((l=(o=z.gradeComponents)==null?void 0:o.performance)==null?void 0:l[1])??0,N.value=((i=(s=z.gradeComponents)==null?void 0:s.exam)==null?void 0:i[1])??0,U.value=((V=(u=z.gradeComponents)==null?void 0:u.exam)==null?void 0:V[2])??0,E.value=z.students.map(S=>{var ne,le,ae,de;const w=((ne=z.gradesData)==null?void 0:ne[S.studid])||{quizzes:[],attendance:[],performance:"",exams:[]},P=((le=z.summaryGrades)==null?void 0:le[S.studid])||{},xe=Array(m.value).fill("").map((fe,R)=>{var I;return((I=w.quizzes)==null?void 0:I[R])!==void 0?w.quizzes[R]:""}),ve=Array(g.value).fill("").map((fe,R)=>{var I;return((I=w.attendance)==null?void 0:I[R])!==void 0?w.attendance[R]:""});return{...S,quizzes:xe,attendance:ve,performance:w.performance??"",prelimScore:((ae=w.exams)==null?void 0:ae[0])??"",midtermScore:((de=w.exams)==null?void 0:de[1])??"",midterm:P.midterm??"",final:P.final??"",overall:P.overall??"",submitted:P.submitted??0,totals:{quiz:0,attendance:0,exam:0},equivs:{quiz:0,attendance:0,performance:0,exam:0},percents:{quiz:0,attendance:0,performance:0,exam:0},midtermGrade:0,equivalent:0,remarks:""}})}catch(C){console.error("Failed to fetch grades:",C)}finally{F.value=!1}};function pe(r){return r>94.45?1:r>93.45?1.1:r>92.45?1.2:r>91.45?1.3:r>90.45?1.4:r>89.45?1.5:r>88.45?1.6:r>87.45?1.7:r>86.45?1.8:r>85.45?1.9:r>84.45?2:r>83.45?2.1:r>82.45?2.2:r>81.45?2.3:r>80.45?2.4:r>79.45?2.5:r>78.45?2.6:r>77.45?2.7:r>76.45?2.8:r>75.45?2.9:r>74.45?3:r>73.45?3.1:r>72.45?3.2:r>71.45?3.3:r>70.45?3.4:(r>69.45,3.5)}ke([E,y,f,k,N,U],()=>{E.value.forEach(r=>{const e=r.quizzes.reduce((u,V)=>u+(Number(V)||0),0);r.totals.quiz=e,r.equivs.quiz=D.value?e*40/D.value+60:0,r.percents.quiz=r.equivs.quiz*.3;const o=r.attendance.reduce((u,V)=>u+(Number(V)||0),0);r.totals.attendance=o,r.equivs.attendance=G.value?o*100/G.value:0,r.percents.attendance=r.equivs.attendance*.15,r.totals.performance=Number(r.performance)||0,r.equivs.performance=k.value?r.totals.performance*50/k.value+50:0,r.percents.performance=r.equivs.performance*.15;const l=Number(r.prelimScore)||0,s=Number(r.midtermScore)||0,i=l+s;r.totals.exam=i,r.equivs.exam=B.value?i*40/B.value+60:0,r.percents.exam=r.equivs.exam*.4,r.midtermGrade=(r.percents.quiz||0)+(r.percents.attendance||0)+(r.percents.performance||0)+(r.percents.exam||0),r.equivalent=Number(pe(r.midtermGrade).toFixed(1)),r.remarks=r.midtermGrade>=75?"Passed":"Failed"})},{deep:!0,immediate:!0});const be=async()=>{try{const r=[];y.value.forEach((s,i)=>{r.push({component_type:"quiz",component_index:i+1,hps:Number(s)||0})}),f.value.forEach((s,i)=>{r.push({component_type:"attendance",component_index:i+1,hps:Number(s)||0})}),r.push({component_type:"performance",component_index:1,hps:Number(k.value)||0}),r.push({component_type:"exam",component_index:1,hps:Number(N.value)||0}),r.push({component_type:"exam",component_index:2,hps:Number(U.value)||0});const e=[];E.value.forEach(s=>{s.quizzes.forEach((i,u)=>{e.push({student_id:s.studid,component_type:"quiz",component_index:u+1,score:Number(i)||0})}),s.attendance.forEach((i,u)=>{e.push({student_id:s.studid,component_type:"attendance",component_index:u+1,score:Number(i)||0})}),e.push({student_id:s.studid,component_type:"performance",component_index:1,score:Number(s.performance)||0}),e.push({student_id:s.studid,component_type:"exam",component_index:1,score:Number(s.prelimScore)||0}),e.push({student_id:s.studid,component_type:"exam",component_index:2,score:Number(s.midtermScore)||0})});const o=E.value.map(s=>({student_id:s.studid,midterm:Number(s.equivalent)||0,final:Number(s.final)||0,overall:Number(s.overall)||0}));await Z.post("/grades/save",{teacher_username:O.value,subject_code:T,course:h,year:L,section:Q,ay_id:q.value.id,gradeComponents:r,gradesData:e,gradesSummary:o}),alert("Grades saved successfully!")}catch(r){console.error("Failed to save grades:",r),alert("Failed to save grades.")}},j=c(null);function ce(){j.value&&(document.fullscreenElement?document.exitFullscreen():j.value.requestFullscreen().catch(r=>{console.error(`Error attempting fullscreen: ${r.message}`)}))}const q=c({id:null,academicyear:"",semester:""}),se=c(""),J=c(""),O=c(""),me=async()=>{try{const r=await Z.get("/api/active-ay");r.data&&(q.value=r.data)}catch(r){console.error("Failed to fetch active academic year",r)}};return Ee(()=>{me(),T&&h&&L&&Q?ue():F.value=!1}),(r,e)=>(d(),a("div",Ae,[t("div",qe,[t("div",Ce,[t("div",Ne,"Subject Code: "+n(H(T)),1),e[7]||(e[7]=t("div",{class:"text-md font-bold"},"Description here",-1))]),t("div",Ue,[t("div",Fe,"Course & Year: "+n(H(h))+" - "+n(H(L)),1),t("div",Ve,"Section: "+n(H(Q)),1)]),t("div",Se,[t("div",Re," Semester: "+n(q.value.semester==="1"?"First Semester":q.value.semester==="2"?"Second Semester":q.value.semester==="3"?"Summer":"Loading..."),1),t("div",Ie,"Academic Year: "+n(q.value.academicyear),1)])]),t("div",{class:"overflow-auto border rounded-lg max-h-[535px]",ref_key:"gradesTable",ref:j},[A.value==="midterm"?(d(),a("table",Me,[t("thead",null,[t("tr",null,[e[10]||(e[10]=t("th",{rowspan:"3",class:"bg-gray-300 border p-2"},"No.",-1)),e[11]||(e[11]=t("th",{rowspan:"3",class:"bg-gray-300 border-none p-2 sticky left-0 top-0 z-40 w-36"},"LASTNAME",-1)),e[12]||(e[12]=t("th",{rowspan:"3",class:"bg-gray-300 border-none p-2 sticky left-20 top-0 z-40 w-36"},"FIRSTNAME",-1)),e[13]||(e[13]=t("th",{rowspan:"3",class:"bg-gray-300 border-none p-2 sticky left-40 top-0 z-40 w-36"},"MIDDLENAME",-1)),t("th",{colspan:m.value+3,class:"bg-gray-300 border p-2"},[e[8]||(e[8]=Y(" QUIZZES ")),t("button",{onClick:ee,class:"ml-2 bg-green-500 text-white px-2 py-0.5 rounded text-xs",title:"Add Quiz Column"}," + "),t("button",{onClick:re,class:"ml-1 bg-red-500 text-white px-2 py-0.5 rounded text-xs",title:"Remove Quiz Column",disabled:m.value<=1}," - ",8,he)],8,Te),t("th",{colspan:g.value+3,class:"bg-gray-300 border p-2"},[e[9]||(e[9]=Y(" ATTENDANCE ")),t("button",{onClick:te,class:"ml-2 bg-green-500 text-white px-2 py-0.5 rounded text-xs",title:"Add Attendance Column"}," + "),t("button",{onClick:oe,class:"ml-1 bg-red-500 text-white px-2 py-0.5 rounded text-xs",title:"Remove Attendance Column",disabled:g.value<=1}," - ",8,Qe)],8,Le),e[14]||(e[14]=t("th",{colspan:"3",class:"bg-gray-300 border p-2"},"PERFORMANCE",-1)),e[15]||(e[15]=t("th",{colspan:"5",class:"bg-gray-300 border p-2"},"MAJOR EXAM",-1)),e[16]||(e[16]=t("th",{colspan:"3",class:"bg-gray-300 border p-2"},"PRELIM",-1))]),t("tr",null,[(d(!0),a(x,null,v(m.value,o=>(d(),a("th",{key:"q-label-"+o,class:"bg-blue-200 border p-1 text-center sticky top-0 z-30"}," Q"+n(o),1))),128)),e[17]||(e[17]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"TOTAL",-1)),e[18]||(e[18]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"EQUIV",-1)),e[19]||(e[19]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"30%",-1)),(d(!0),a(x,null,v(g.value,o=>(d(),a("th",{key:"a-label-"+o,class:"bg-blue-200 border p-1 text-center sticky top-0 z-30"}," A"+n(o),1))),128)),e[20]||(e[20]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"TOTAL",-1)),e[21]||(e[21]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"EQUIV",-1)),e[22]||(e[22]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"15%",-1)),e[23]||(e[23]=t("th",{class:"bg-blue-200 border p-1 text-center sticky top-0 z-30"},"100",-1)),e[24]||(e[24]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"EQUIV",-1)),e[25]||(e[25]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"15%",-1)),e[26]||(e[26]=t("th",{class:"bg-blue-200 border p-1 text-center sticky top-0 z-30"},"PRELIM SCORE",-1)),e[27]||(e[27]=t("th",{class:"bg-blue-200 border p-1 text-center sticky top-0 z-30"},"MIDTERM SCORE",-1)),e[28]||(e[28]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"TOTAL",-1)),e[29]||(e[29]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"EQUIV",-1)),e[30]||(e[30]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"40%",-1)),e[31]||(e[31]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"MIDTERM GRADE",-1)),e[32]||(e[32]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"EQUIVALENT",-1)),e[33]||(e[33]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"REMARKS",-1))]),t("tr",null,[(d(!0),a(x,null,v(y.value,(o,l)=>(d(),a("td",{key:"hps-quiz-"+l,class:"border p-1 bg-blue-200 sticky top-8 z-30"},[p(t("input",{"onUpdate:modelValue":s=>y.value[l]=s,type:"number",min:"0",class:"w-12 border px-1 text-center bg-blue-200 score-input"},null,8,De),[[b,y.value[l],void 0,{number:!0}]])]))),128)),t("td",Ge,n(D.value.toFixed(0)),1),e[34]||(e[34]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"100",-1)),e[35]||(e[35]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"30",-1)),(d(!0),a(x,null,v(f.value,(o,l)=>(d(),a("td",{key:"hps-attendance-"+l,class:"border p-1 bg-blue-200 sticky top-8 z-30"},[p(t("input",{"onUpdate:modelValue":s=>f.value[l]=s,type:"number",min:"0",class:"w-12 border px-1 text-center bg-blue-200 score-input"},null,8,Oe),[[b,f.value[l],void 0,{number:!0}]])]))),128)),t("td",Pe,n(G.value.toFixed(0)),1),e[36]||(e[36]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"100",-1)),e[37]||(e[37]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"15",-1)),t("td",$e,[p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>k.value=o),type:"number",min:"0",class:"w-12 border px-1 text-center bg-blue-200 score-input"},null,512),[[b,k.value,void 0,{number:!0}]])]),e[38]||(e[38]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"100",-1)),e[39]||(e[39]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"15",-1)),t("td",He,[p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>N.value=o),type:"number",min:"0",class:"w-12 border px-1 text-center bg-blue-200 score-input"},null,512),[[b,N.value,void 0,{number:!0}]])]),t("td",Ke,[p(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>U.value=o),type:"number",min:"0",class:"w-12 border px-1 text-center bg-blue-200 sticky top-8 z-30 score-input"},null,512),[[b,U.value,void 0,{number:!0}]])]),t("td",Ye,n(B.value.toFixed(0)),1),e[40]||(e[40]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"100",-1)),e[41]||(e[41]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"40",-1)),e[42]||(e[42]=t("td",{colspan:"2",class:"border p-1 bg-gray-300 sticky top-8 z-30"},null,-1)),e[43]||(e[43]=t("td",{colspan:"1",class:"border p-1 bg-gray-300 sticky top-8 z-30"},null,-1))])]),t("tbody",null,[F.value?(d(),a("tr",Ze,[t("td",{colspan:_.value,class:"text-center p-4"},"Loading student data...",8,Be)])):K("",!0),(d(!0),a(x,null,v(E.value,(o,l)=>(d(),a("tr",{key:o.id},[t("td",Xe,n(l+1),1),t("td",je,n(o.lname),1),t("td",Je,n(o.fname),1),t("td",We,n(o.mname),1),(d(!0),a(x,null,v(o.quizzes,(s,i)=>(d(),a("td",{key:"quiz-"+l+"-"+i,class:"border p-1 bg-blue-100"},[p(t("input",{"onUpdate:modelValue":u=>o.quizzes[i]=u,type:"number",min:"0",max:y.value[i]||100,class:"w-12 border px-1 text-center bg-blue-100 score-input"},null,8,_e),[[b,o.quizzes[i],void 0,{number:!0}]])]))),128)),t("td",et,n(o.totals.quiz.toFixed(0)),1),t("td",tt,n(o.equivs.quiz.toFixed(0)),1),t("td",rt,n(o.percents.quiz.toFixed(0)),1),(d(!0),a(x,null,v(o.attendance,(s,i)=>(d(),a("td",{key:"att-"+l+"-"+i,class:"border p-1 bg-blue-100"},[p(t("input",{"onUpdate:modelValue":u=>o.attendance[i]=u,type:"number",min:"0",max:"1",class:"w-12 border px-1 text-center bg-blue-100 score-input"},null,8,ot),[[b,o.attendance[i],void 0,{number:!0}]])]))),128)),t("td",st,n(o.totals.attendance.toFixed(0)),1),t("td",nt,n(o.equivs.attendance.toFixed(0)),1),t("td",lt,n(o.percents.attendance.toFixed(0)),1),t("td",at,[p(t("input",{"onUpdate:modelValue":s=>o.performance=s,type:"number",min:"0",max:k.value,class:"w-12 border px-1 text-center bg-blue-100 score-input"},null,8,dt),[[b,o.performance,void 0,{number:!0}]])]),t("td",it,n(o.equivs.performance.toFixed(0)),1),t("td",ut,n(o.percents.performance.toFixed(0)),1),t("td",pt,[p(t("input",{"onUpdate:modelValue":s=>o.prelimScore=s,type:"number",min:"0",max:N.value,class:"w-12 border px-1 text-center bg-blue-100 score-input"},null,8,bt),[[b,o.prelimScore,void 0,{number:!0}]])]),t("td",ct,[p(t("input",{"onUpdate:modelValue":s=>o.midtermScore=s,type:"number",min:"0",max:U.value,class:"w-12 border px-1 text-center bg-blue-100 score-input"},null,8,mt),[[b,o.midtermScore,void 0,{number:!0}]])]),t("td",gt,n(o.totals.exam.toFixed(0)),1),t("td",yt,n(o.equivs.exam.toFixed(0)),1),t("td",xt,n(o.percents.exam.toFixed(0)),1),t("td",vt,n(o.midtermGrade.toFixed(0)),1),t("td",ft,n(o.equivalent.toFixed(1)),1),t("td",{class:W(["border p-1 text-center font-semibold",{"text-green-700 bg-green-100":o.remarks==="Passed","text-red-700 bg-red-100":o.remarks==="Failed"}])},n(o.remarks),3)]))),128))])])):K("",!0),A.value==="finals"?(d(),a("table",zt,[t("thead",null,[t("tr",null,[e[46]||(e[46]=t("th",{rowspan:"3",class:"bg-gray-300 border p-2"},"No.",-1)),e[47]||(e[47]=t("th",{rowspan:"3",class:"bg-gray-300 border-none p-2 sticky left-0 top-0 z-40 w-36"},"LASTNAME",-1)),e[48]||(e[48]=t("th",{rowspan:"3",class:"bg-gray-300 border-none p-2 sticky left-20 top-0 z-40 w-36"},"FIRSTNAME",-1)),e[49]||(e[49]=t("th",{rowspan:"3",class:"bg-gray-300 border-none p-2 sticky left-40 top-0 z-40 w-36"},"MIDDLENAME",-1)),t("th",{colspan:m.value+3,class:"bg-gray-300 border p-2"},[e[44]||(e[44]=Y(" QUIZZES ")),t("button",{onClick:ee,class:"ml-2 bg-green-500 text-white px-2 py-0.5 rounded text-xs",title:"Add Quiz Column"},"+"),t("button",{onClick:re,class:"ml-1 bg-red-500 text-white px-2 py-0.5 rounded text-xs",title:"Remove Quiz Column",disabled:m.value<=1},"-",8,Et)],8,kt),t("th",{colspan:g.value+3,class:"bg-gray-300 border p-2"},[e[45]||(e[45]=Y(" ATTENDANCE ")),t("button",{onClick:te,class:"ml-2 bg-green-500 text-white px-2 py-0.5 rounded text-xs",title:"Add Attendance Column"},"+"),t("button",{onClick:oe,class:"ml-1 bg-red-500 text-white px-2 py-0.5 rounded text-xs",title:"Remove Attendance Column",disabled:g.value<=1},"-",8,At)],8,wt),e[50]||(e[50]=t("th",{colspan:"3",class:"bg-gray-300 border p-2"},"PERFORMANCE",-1)),e[51]||(e[51]=t("th",{colspan:"4",class:"bg-gray-300 border p-2"},"FINAL EXAM / SCORE",-1)),e[52]||(e[52]=t("th",{colspan:"3",class:"bg-gray-300 border p-2"},"FINAL SUMMARY",-1)),e[53]||(e[53]=t("th",{colspan:"3",class:"bg-gray-300 border p-2"},"MIDTERM REFERENCE",-1))]),t("tr",null,[(d(!0),a(x,null,v(m.value,o=>(d(),a("th",{key:"fq-label-"+o,class:"bg-blue-200 border p-1 text-center sticky top-0 z-30"},"Q"+n(o),1))),128)),e[54]||(e[54]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"TOTAL",-1)),e[55]||(e[55]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"EQUIV",-1)),e[56]||(e[56]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"30%",-1)),(d(!0),a(x,null,v(g.value,o=>(d(),a("th",{key:"fa-label-"+o,class:"bg-blue-200 border p-1 text-center sticky top-0 z-30"},"A"+n(o),1))),128)),e[57]||(e[57]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"TOTAL",-1)),e[58]||(e[58]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"EQUIV",-1)),e[59]||(e[59]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"15%",-1)),e[60]||(e[60]=t("th",{class:"bg-blue-200 border p-1 text-center sticky top-0 z-30"},"SCORE",-1)),e[61]||(e[61]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"EQUIV",-1)),e[62]||(e[62]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"15%",-1)),e[63]||(e[63]=t("th",{class:"bg-blue-200 border p-1 text-center sticky top-0 z-30"},"SCORE",-1)),e[64]||(e[64]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"EQUIV",-1)),e[65]||(e[65]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"40%",-1)),e[66]||(e[66]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"FINAL SCORE",-1)),e[67]||(e[67]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"FINAL GRADE",-1)),e[68]||(e[68]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"EQUIVALENT",-1)),e[69]||(e[69]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"REMARKS",-1)),e[70]||(e[70]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"MIDTERM GRADE",-1)),e[71]||(e[71]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"EQUIVALENT",-1)),e[72]||(e[72]=t("th",{class:"bg-gray-300 border p-1 text-center sticky top-0 z-30"},"REMARKS",-1))]),t("tr",null,[(d(!0),a(x,null,v(y.value,(o,l)=>(d(),a("td",{key:"fhps-quiz-"+l,class:"border p-1 bg-blue-200 sticky top-8 z-30"},[p(t("input",{"onUpdate:modelValue":s=>y.value[l]=s,type:"number",min:"0",class:"w-12 border px-1 text-center bg-blue-200 score-input"},null,8,qt),[[b,y.value[l],void 0,{number:!0}]])]))),128)),t("td",Ct,n(D.value.toFixed(0)),1),e[73]||(e[73]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"100",-1)),e[74]||(e[74]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"30",-1)),(d(!0),a(x,null,v(f.value,(o,l)=>(d(),a("td",{key:"fhps-att-"+l,class:"border p-1 bg-blue-200 sticky top-8 z-30"},[p(t("input",{"onUpdate:modelValue":s=>f.value[l]=s,type:"number",min:"0",class:"w-12 border px-1 text-center bg-blue-200 score-input"},null,8,Nt),[[b,f.value[l],void 0,{number:!0}]])]))),128)),t("td",Ut,n(G.value.toFixed(0)),1),e[75]||(e[75]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"100",-1)),e[76]||(e[76]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"15",-1)),t("td",Ft,[p(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>k.value=o),type:"number",min:"0",class:"w-12 border px-1 text-center bg-blue-200 score-input"},null,512),[[b,k.value,void 0,{number:!0}]])]),e[77]||(e[77]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"100",-1)),e[78]||(e[78]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"15",-1)),t("td",Vt,[p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.hpsFinalExam=o),type:"number",min:"0",class:"w-12 border px-1 text-center bg-blue-200 score-input"},null,512),[[b,r.hpsFinalExam,void 0,{number:!0}]])]),e[79]||(e[79]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"100",-1)),e[80]||(e[80]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},"40",-1)),e[81]||(e[81]=t("td",{class:"border p-1 bg-gray-300 text-center sticky top-8 z-30"},null,-1)),e[82]||(e[82]=t("td",{colspan:"3",class:"border p-1 bg-gray-300 sticky top-8 z-30"},null,-1)),e[83]||(e[83]=t("td",{colspan:"3",class:"border p-1 bg-gray-300 sticky top-8 z-30"},null,-1))])]),t("tbody",null,[F.value?(d(),a("tr",St,[t("td",{colspan:_.value,class:"text-center p-4"},"Loading student data...",8,Rt)])):K("",!0),(d(!0),a(x,null,v(E.value,(o,l)=>(d(),a("tr",{key:o.id},[t("td",It,n(l+1),1),t("td",Mt,n(o.lname),1),t("td",Tt,n(o.fname),1),t("td",ht,n(o.mname),1),(d(!0),a(x,null,v(o.quizzes,(s,i)=>(d(),a("td",{key:"fquiz-"+l+"-"+i,class:"border p-1 bg-blue-100"},[p(t("input",{"onUpdate:modelValue":u=>o.quizzes[i]=u,type:"number",min:"0",max:y.value[i]||100,class:"w-12 border px-1 text-center bg-blue-100 score-input"},null,8,Lt),[[b,o.quizzes[i],void 0,{number:!0}]])]))),128)),e[84]||(e[84]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[85]||(e[85]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[86]||(e[86]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),(d(!0),a(x,null,v(o.attendance,(s,i)=>(d(),a("td",{key:"fatt-"+l+"-"+i,class:"border p-1 bg-blue-100"},[p(t("input",{"onUpdate:modelValue":u=>o.attendance[i]=u,type:"number",min:"0",max:"1",class:"w-12 border px-1 text-center bg-blue-100 score-input"},null,8,Qt),[[b,o.attendance[i],void 0,{number:!0}]])]))),128)),e[87]||(e[87]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[88]||(e[88]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[89]||(e[89]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),t("td",Dt,[p(t("input",{"onUpdate:modelValue":s=>o.performance=s,type:"number",min:"0",max:k.value,class:"w-12 border px-1 text-center bg-blue-100 score-input"},null,8,Gt),[[b,o.performance,void 0,{number:!0}]])]),e[90]||(e[90]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[91]||(e[91]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),t("td",Ot,[p(t("input",{"onUpdate:modelValue":s=>o.finalExam=s,type:"number",min:"0",max:r.hpsFinalExam,class:"w-12 border px-1 text-center bg-blue-100 score-input"},null,8,Pt),[[b,o.finalExam,void 0,{number:!0}]])]),e[92]||(e[92]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[93]||(e[93]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[94]||(e[94]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[95]||(e[95]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[96]||(e[96]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[97]||(e[97]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[98]||(e[98]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[99]||(e[99]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1)),e[100]||(e[100]=t("td",{class:"border p-1 text-center font-semibold bg-gray-200"},null,-1))]))),128))])])):K("",!0)],512),t("div",$t,[t("button",{onClick:ce,class:"fullscreen-btn mr-5 px-2 py-2"}," ⛶ Fullscreen "),t("button",{onClick:be,disabled:F.value,class:"bg-mccblue hover:bg-mccdarkblue text-white px-4 py-2 rounded transition"}," Save Grades ",8,Ht)]),t("div",Kt,[t("button",{onClick:e[5]||(e[5]=o=>A.value="midterm"),class:W([{"bg-gray-300 text-black":A.value==="midterm","bg-gray-100 text-gray-600":A.value!=="midterm"},"px-3 py-1 rounded border"])}," Prelim-Midterm ",2),t("button",{onClick:e[6]||(e[6]=o=>A.value="finals"),class:W([{"bg-gray-300 text-black":A.value==="finals","bg-gray-100 text-gray-600":A.value!=="finals"},"px-3 py-1 rounded border"])}," Finals ",2)])]))}},Wt=we(Yt,[["__scopeId","data-v-aa849b6f"]]);export{Wt as default};
