import{r as l,c as v,o as C,J as B,b as f,d,w as L,e as t,l as h,g as T,F as k,h as D,t as u,a as b,W as F}from"./app-CMI1OZD2.js";import{_ as W}from"./DashboardLayout-0aQsmZzk.js";import{_ as z}from"./CardSpotlight.vue_vue_type_script_setup_true_lang-9-LeJ3c8.js";import"./index-C6AQkGUd.js";import"./sweetalert2.esm.all-BQIkj5Wb.js";const M={class:"flex flex-col md:flex-row gap-6 p-1"},$={class:"flex-1 bg-white rounded-lg shadow p-4"},A={class:"grid grid-cols-1 md:grid-cols-2"},I={class:"flex flex-col justify-between space-y-2"},N={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 px-4"},O={class:"bg-white shadow p-4 rounded-lg text-center"},E={class:"text-3xl font-bold text-mcclightblue"},V={class:"bg-white shadow p-4 rounded-lg text-center"},j={class:"text-2xl font-bold text-gray-700"},P={__name:"Instructors",setup(G){const g=e=>{F.visit(`/instructors/${e}`)},n=l(""),c=l(""),x=l(""),m=l({}),i=l({}),r=l({total:0,male:0,female:0}),o=l([{label:"BSIT",count:0,color:"#dc2626"},{label:"BSBA",count:0,color:"#16a34a"},{label:"BSHM",count:0,color:"#ea580c"},{label:"EDUC",count:0,color:"#1e3a8a"}]),_=async()=>{try{const e=await b.get("/session");n.value=e.data.fullname,c.value=e.data.level,x.value=e.data.username,(!n.value||!c.value)&&(window.location.href="/")}catch{window.location.href="/"}},y=async()=>{try{const e=await b.get("/instructor-stats");m.value=e.data.byDepartment,i.value=e.data.byGender,r.value=e.data.totals,o.value=o.value.map(a=>({...a,count:m.value[a.label]||0}))}catch(e){console.error("Failed to fetch teacher stats:",e)}},w=v(()=>({tooltip:{trigger:"axis"},xAxis:{type:"category",data:o.value.map(e=>e.label),axisLabel:{fontWeight:"bold",color:"#374151"}},yAxis:{type:"value",axisLabel:{color:"#6B7280"}},series:[{data:o.value.map(e=>e.count),type:"bar",barWidth:"50%",itemStyle:{borderRadius:6,color:e=>o.value[e.dataIndex].color}}],grid:{left:"5%",right:"5%",bottom:"10%",top:"10%",containLabel:!0}})),S=v(()=>({tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:i.value.male||0,name:"Male",itemStyle:{color:"#3b82f6"}},{value:i.value.female||0,name:"Female",itemStyle:{color:"#f472b6"}}]}]}));return C(()=>{_(),y()}),(e,a)=>{const p=B("v-chart");return d(),f(W,{fullname:n.value,userLevel:c.value,title:"Teachers",class:"animate-slide-in-top"},{default:L(()=>[t("div",M,[t("div",$,[a[0]||(a[0]=t("h2",{class:"text-sm md:text-lg font-semibold text-gray-700 mb-2"},"Teacher Statistics",-1)),t("div",A,[h(p,{option:w.value,autoresize:"",class:"h-[300px]"},null,8,["option"]),h(p,{option:S.value,autoresize:"",class:"h-[300px]"},null,8,["option"])])]),t("div",I,[(d(!0),T(k,null,D(o.value,s=>(d(),f(z,{key:s.label,label:s.label,count:s.count,iconName:"teachers",useSvg:!0,bgColor:s.color,gradientSize:0,class:"cursor-pointer md:w-[300px] h-[90px]",onClick:H=>g(s.label)},null,8,["label","count","bgColor","onClick"]))),128))])]),t("div",N,[t("div",O,[a[1]||(a[1]=t("h3",{class:"text-gray-700 font-semibold text-lg"},"Total Teachers",-1)),t("p",E,u(r.value.total),1)]),t("div",V,[a[2]||(a[2]=t("h3",{class:"text-gray-700 font-semibold text-lg"},"Male / Female",-1)),t("p",j," ðŸ‘¨ "+u(r.value.male)+" Â Â  ðŸ‘© "+u(r.value.female),1)])])]),_:1},8,["fullname","userLevel"])}}};export{P as default};
